2025-10-15 14:53:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 14:53:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 14:53:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 14:53:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 14:53:37,586 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 14:53:37,591 - [35mDEV [0m livekit.agents - Watching /home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot [90m[0m
2025-10-15 14:53:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 14:53:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 14:53:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 14:53:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 14:53:48,260 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 14:53:48,280 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 14:53:48,280 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 14:53:48,311 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 14:53:55,084 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 36870, "inference": true}[0m
2025-10-15 14:53:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 14:53:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 14:53:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 14:53:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 14:53:59,460 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 36870, "inference": true}[0m
2025-10-15 14:54:21,192 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 21.732246190000296, "pid": 36870, "inference": true}[0m
2025-10-15 14:54:21,192 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 36870, "inference": true}[0m
2025-10-15 14:54:25,059 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 36870, "inference": true, "elapsed_time": 29.97}[0m
2025-10-15 14:54:25,058 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 3.86499089300014, "pid": 36870, "inference": true}[0m
2025-10-15 14:54:25,059 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 36870, "inference": true}[0m
2025-10-15 14:54:25,065 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 14:54:31,140 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_dBLMvbrm6QSH", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:05:12,895 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_dBLMvbrm6QSH"}[0m
2025-10-15 15:05:12,899 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 36870, "inference": true}[0m
2025-10-15 15:05:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:05:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:05:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:05:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:05:22,572 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:05:22,592 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:05:22,592 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:05:22,606 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:05:30,480 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:05:31 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:05:31 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:05:31 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:05:31 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:05:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:05:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:05:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:05:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:05:37,368 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:05:37,382 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:05:37,382 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:05:37,392 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:05:42,980 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 38695, "inference": true}[0m
2025-10-15 15:05:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:05:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:05:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:05:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:05:45,146 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 38695, "inference": true}[0m
2025-10-15 15:06:02,250 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 17.10435776000122, "pid": 38695, "inference": true}[0m
2025-10-15 15:06:02,250 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 38695, "inference": true}[0m
2025-10-15 15:06:05,238 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 2.9872737919995416, "pid": 38695, "inference": true}[0m
2025-10-15 15:06:05,241 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 38695, "inference": true, "elapsed_time": 22.26}[0m
2025-10-15 15:06:05,239 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 38695, "inference": true}[0m
2025-10-15 15:06:05,247 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:06:06,562 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_YFzmv47mnanz", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:06:42,997 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_YFzmv47mnanz"}[0m
2025-10-15 15:06:43,013 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 38695, "inference": true}[0m
2025-10-15 15:06:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:06:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:06:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:06:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:06:52,323 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:06:52,346 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:06:52,346 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:06:52,362 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:06:55,436 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:07:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:07:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:07:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:07:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:07:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:07:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:07:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:07:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:07:04,207 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:07:04,224 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:07:04,225 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:07:04,239 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:07:09,999 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 38968, "inference": true}[0m
2025-10-15 15:07:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:07:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:07:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:07:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:07:13,517 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 38968, "inference": true}[0m
2025-10-15 15:07:33,356 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 19.83856483800082, "pid": 38968, "inference": true}[0m
2025-10-15 15:07:33,356 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 38968, "inference": true}[0m
2025-10-15 15:07:36,344 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 38968, "inference": true, "elapsed_time": 26.34}[0m
2025-10-15 15:07:36,343 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 2.9869497649997356, "pid": 38968, "inference": true}[0m
2025-10-15 15:07:36,343 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 38968, "inference": true}[0m
2025-10-15 15:07:36,348 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:07:37,424 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_KUCQmfqDGvYL", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:07:55,834 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_KUCQmfqDGvYL"}[0m
2025-10-15 15:07:55,836 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 38968, "inference": true}[0m
2025-10-15 15:08:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:08:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:08:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:08:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:08:06,257 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:08:06,278 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:08:06,279 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:08:06,296 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:08:12,444 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 39225, "inference": true}[0m
2025-10-15 15:08:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:08:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:08:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:08:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:08:15,439 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 39225, "inference": true}[0m
2025-10-15 15:08:31,940 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 16.500530889999936, "pid": 39225, "inference": true}[0m
2025-10-15 15:08:31,940 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 39225, "inference": true}[0m
2025-10-15 15:08:33,726 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:08:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:08:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:08:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:08:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:08:43,614 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:08:43,635 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:08:43,635 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:08:43,654 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:08:49,597 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 39363, "inference": true}[0m
2025-10-15 15:08:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:08:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:08:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:08:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:08:51,713 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 39363, "inference": true}[0m
2025-10-15 15:09:02,894 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:09:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:09:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:09:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:09:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:09:15,297 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:09:15,326 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:09:15,327 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:09:15,347 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:09:21,965 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 39502, "inference": true}[0m
2025-10-15 15:09:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:09:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:09:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:09:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:09:24,163 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 39502, "inference": true}[0m
2025-10-15 15:09:38,863 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 14.699783928001125, "pid": 39502, "inference": true}[0m
2025-10-15 15:09:38,863 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 39502, "inference": true}[0m
2025-10-15 15:09:42,210 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 39502, "inference": true, "elapsed_time": 20.24}[0m
2025-10-15 15:09:42,209 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 3.346428270000615, "pid": 39502, "inference": true}[0m
2025-10-15 15:09:42,210 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 39502, "inference": true}[0m
2025-10-15 15:09:42,214 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:09:43,522 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_zRmUJWdk3rX3", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:10:18,771 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_zRmUJWdk3rX3"}[0m
2025-10-15 15:10:18,775 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 39502, "inference": true}[0m
2025-10-15 15:10:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:10:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:10:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:10:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:10:28,479 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:10:28,502 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:10:28,502 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:10:28,522 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:10:34,337 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 39725, "inference": true}[0m
2025-10-15 15:10:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:10:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:10:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:10:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:10:37,308 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 39725, "inference": true}[0m
2025-10-15 15:10:46,647 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:10:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:10:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:10:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:10:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:10:55,665 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:10:55,684 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:10:55,685 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:10:55,698 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:10:58,947 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 39812, "inference": true}[0m
2025-10-15 15:10:59 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:10:59 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:10:59 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:10:59 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:10:59,978 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 39812, "inference": true}[0m
2025-10-15 15:11:06,983 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.0040672670002095, "pid": 39812, "inference": true}[0m
2025-10-15 15:11:06,983 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 39812, "inference": true}[0m
2025-10-15 15:11:08,579 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 39812, "inference": true, "elapsed_time": 9.63}[0m
2025-10-15 15:11:08,578 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 1.5957044560000213, "pid": 39812, "inference": true}[0m
2025-10-15 15:11:08,579 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 39812, "inference": true}[0m
2025-10-15 15:11:08,581 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:11:09,625 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_KzHv7jo2NDgB", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:14:45,215 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_KzHv7jo2NDgB"}[0m
2025-10-15 15:14:45,218 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 39812, "inference": true}[0m
2025-10-15 15:14:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:14:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:14:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:14:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:14:50,039 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:14:50,049 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:14:50,049 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:14:50,056 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:14:52,715 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 40430, "inference": true}[0m
2025-10-15 15:14:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:14:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:14:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:14:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:14:53,775 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 40430, "inference": true}[0m
2025-10-15 15:15:00,478 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.702035881000484, "pid": 40430, "inference": true}[0m
2025-10-15 15:15:00,478 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 40430, "inference": true}[0m
2025-10-15 15:15:02,000 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 40430, "inference": true, "elapsed_time": 9.28}[0m
2025-10-15 15:15:02,000 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 1.5222773509995022, "pid": 40430, "inference": true}[0m
2025-10-15 15:15:02,000 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 40430, "inference": true}[0m
2025-10-15 15:15:02,003 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:15:03,004 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_wQx5KjMqJT5M", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:18:46,978 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_wQx5KjMqJT5M"}[0m
2025-10-15 15:18:46,979 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 40430, "inference": true}[0m
2025-10-15 15:18:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:18:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:18:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:18:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:18:52,954 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:18:52,967 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:18:52,968 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:18:52,975 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:18:56,852 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 40920, "inference": true}[0m
2025-10-15 15:18:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:18:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:18:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:18:58 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:18:58,501 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 40920, "inference": true}[0m
2025-10-15 15:19:05,481 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:19:10 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:19:10 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:19:10 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:19:10 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:19:10,404 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:19:10,414 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:19:10,414 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:19:10,421 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:19:13,024 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 40983, "inference": true}[0m
2025-10-15 15:19:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:19:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:19:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:19:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:19:14,036 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 40983, "inference": true}[0m
2025-10-15 15:19:20,489 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.452789498000129, "pid": 40983, "inference": true}[0m
2025-10-15 15:19:20,489 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 40983, "inference": true}[0m
2025-10-15 15:19:21,996 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 40983, "inference": true, "elapsed_time": 8.97}[0m
2025-10-15 15:19:21,995 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 1.506132009000794, "pid": 40983, "inference": true}[0m
2025-10-15 15:19:21,996 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 40983, "inference": true}[0m
2025-10-15 15:19:21,998 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:19:22,951 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_VmBcuYA2rMG7", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:23:49,442 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_VmBcuYA2rMG7"}[0m
2025-10-15 15:23:49,444 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 40983, "inference": true}[0m
2025-10-15 15:23:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:23:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:23:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:23:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:23:54,373 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:23:54,381 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:23:54,381 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:23:54,388 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:23:56,865 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 41660, "inference": true}[0m
2025-10-15 15:23:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:23:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:23:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:23:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:23:57,891 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 41660, "inference": true}[0m
2025-10-15 15:24:04,855 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.963826994000556, "pid": 41660, "inference": true}[0m
2025-10-15 15:24:04,855 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 41660, "inference": true}[0m
2025-10-15 15:24:06,519 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 41660, "inference": true, "elapsed_time": 9.65}[0m
2025-10-15 15:24:06,518 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 1.6631725520001055, "pid": 41660, "inference": true}[0m
2025-10-15 15:24:06,519 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 41660, "inference": true}[0m
2025-10-15 15:24:06,520 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:24:07,923 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_UEPmPmQKh4Bi", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:43:54,309 - [32mINFO[0m livekit.agents - received job request [90m{"job_id": "AJ_tXmpJNDSTcrL", "dispatch_id": "", "room_name": "both-21-1-BARWOOD & REGENCY TAXI-nQlyl", "agent_name": "", "resuming": false}[0m
2025-10-15 15:43:54,495 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 44001}[0m
2025-10-15 15:43:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:43:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:43:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:43:55 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:43:55,842 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 44001, "elapsed_time": 1.35}[0m
2025-10-15 15:43:55,842 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
VAAPI is supported.
2025-10-15 15:43:58 - ivr_bot.main - INFO - [no-session] - Call SID: chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7
2025-10-15 15:43:58 - ivr_bot.main - INFO - [no-session] - Call SID: chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7
2025-10-15 15:43:58,975 - [32mINFO[0m ivr_bot.main - Call SID: chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Client ID None
2025-10-15 15:43:59 - ivr_bot.helper_functions - WARNING - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 15:43:59 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:43:59 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 15:43:59,229 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59 - ivr_bot.helper_functions - WARNING - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Failed to initialize Agent with increased function call limits
2025-10-15 15:43:59 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 15:43:59,229 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:43:59,229 - [32mINFO[0m ivr_bot.helper_functions - ✅ [ASSISTANT_INIT] Validated initialization parameters [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Using pre-configured background audio player for typing sounds
2025-10-15 15:43:59 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 15:43:59,230 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 15:43:59,230 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:43:59,235 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:05 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 15:44:05 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 15:44:05 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 15:44:05,647 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:05,648 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:05 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 15:44:05,648 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Initialized background audio player
2025-10-15 15:44:06 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 15:44:06,031 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Started typing sounds for API fetching phase
2025-10-15 15:44:06 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 15:44:06,032 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 15:44:06 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - {}
2025-10-15 15:44:06,063 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 15:44:06,063 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 15:44:06 - ivr_bot.main - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 15:44:06,064 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.cache_manager - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Cache EXPIRED for affiliate: ids:1:21
2025-10-15 15:44:06 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 15:44:06,064 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06 - ivr_bot.cache_manager - INFO - [no-session] - Cache EXPIRED for affiliate: ids:1:21
2025-10-15 15:44:06,064 - [32mINFO[0m ivr_bot.cache_manager - Cache EXPIRED for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06,065 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: None [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:06,065 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: recognize_affiliate_by_ids [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.cache_manager - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Saved caches to disk: 1 affiliate entries, 0 client entries
2025-10-15 15:44:07,229 - [36mDEBUG[0m ivr_bot.side_functions - Affiliate data: [{'AffiliateID': 62, 'AffiliateName': 'TAM Transit', 'AffiliateFamilyID': 8, 'TwillioPhoneNumber': '2403270505', 'TypeForIVRAI': ''}, {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019841900', 'TypeForIVRAI': 'BOTH'}, {'AffiliateID': 17, 'AffiliateName': 'RTH', 'AffiliateFamilyID': 6, 'TwillioPhoneNumber': '9097380827', 'TypeForIVRAI': ''}, {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019841900', 'TypeForIVRAI': 'BOTH'}, {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'}, {'AffiliateID': 62, 'AffiliateName': 'TAM Transit', 'AffiliateFamilyID': 8, 'TwillioPhoneNumber': '2405024545', 'TypeForIVRAI': ''}] [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.cache_manager - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Stored affiliate in cache: ids:1:21
2025-10-15 15:44:07,230 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: recognize_affiliate_by_ids [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.cache_manager - INFO - [no-session] - Saved caches to disk: 1 affiliate entries, 0 client entries
2025-10-15 15:44:07,230 - [32mINFO[0m ivr_bot.cache_manager - Saved caches to disk: 1 affiliate entries, 0 client entries [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.cache_manager - INFO - [no-session] - Stored affiliate in cache: ids:1:21
2025-10-15 15:44:07,230 - [32mINFO[0m ivr_bot.cache_manager - Stored affiliate in cache: ids:1:21 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Widget Flow chatbot Selected
2025-10-15 15:44:07,230 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07,230 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07,231 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 15:44:07,231 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07,231 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:07,231 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:08 - ivr_bot.side_functions - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:44:08 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:44:08,255 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:08 - ivr_bot.side_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 15:44:08,256 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:08,256 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:08 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 15:44:08,256 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:12 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Client ID -1
2025-10-15 15:44:12 - ivr_bot.helper_functions - WARNING - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:44:12,790 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:12 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 15:44:12,790 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:12 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:44:12,791 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:12,791 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:12,791 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:13 - ivr_bot.side_functions - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 15:44:13,783 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:13 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 15:44:13,783 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:13,784 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Building user context information
2025-10-15 15:44:14 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User context built successfully
2025-10-15 15:44:14 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Client ID -1
2025-10-15 15:44:14 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 15:44:14 - ivr_bot.helper_functions - WARNING - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:44:14,786 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 15:44:14 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:44:14,788 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 15:44:14 - ivr_bot.helper_functions - WARNING - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Failed to initialize Agent with increased function call limits
2025-10-15 15:44:14,789 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:44:14,789 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:44:14,789 - [32mINFO[0m ivr_bot.helper_functions - ✅ [ASSISTANT_INIT] Validated initialization parameters [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 15:44:14,790 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Successfully updated initial_agent with enhanced context
2025-10-15 15:44:14 - ivr_bot.main - INFO - [no-session] - Successfully updated initial_agent with enhanced context
2025-10-15 15:44:14,791 - [32mINFO[0m ivr_bot.main - Successfully updated initial_agent with enhanced context [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Stopped typing sounds - API fetching complete
2025-10-15 15:44:14 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Preparing to deliver personalized follow-up message
2025-10-15 15:44:14 - ivr_bot.main - INFO - [no-session] - Stopped typing sounds - API fetching complete
2025-10-15 15:44:14,840 - [32mINFO[0m ivr_bot.main - Stopped typing sounds - API fetching complete [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:14 - ivr_bot.main - INFO - [no-session] - Preparing to deliver personalized follow-up message
2025-10-15 15:44:14,841 - [32mINFO[0m ivr_bot.main - Preparing to deliver personalized follow-up message [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:40 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - APIs fetched and processing complete. Audio input RE-ENABLED.
2025-10-15 15:44:40,781 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I now have your information from Barwood and Regency Taxi  agency. Can I have your phone number please?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:40 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Started phone number collection
2025-10-15 15:44:40,782 - [36mDEBUG[0m livekit.agents - input stream attached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:40 - ivr_bot.main - INFO - [no-session] - APIs fetched and processing complete. Audio input RE-ENABLED.
2025-10-15 15:44:40,782 - [32mINFO[0m ivr_bot.main - APIs fetched and processing complete. Audio input RE-ENABLED. [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:40 - ivr_bot.main - INFO - [no-session] - Started phone number collection
2025-10-15 15:44:40,783 - [32mINFO[0m ivr_bot.main - Started phone number collection [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:44 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: +12345678912
2025-10-15 15:44:44,299 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: +12345678912. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:44 - ivr_bot.main - INFO - [no-session] - User transcript received: +12345678912
2025-10-15 15:44:44,299 - [32mINFO[0m ivr_bot.main - User transcript received: +12345678912 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:48 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912
2025-10-15 15:44:48,117 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_and_store_phone_number", "arguments": "{\"phone_number\":\"+12345678912\"}", "speech_id": "speech_801678dd90eb", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:48 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912
2025-10-15 15:44:48,117 - [32mINFO[0m ivr_bot.helper_functions - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:48,119 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_801678dd90eb", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:53,287 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Thank you for providing your phone number. Let me check your profile details. Please wait a moment.. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:55 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:44:55 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:44:55,136 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:55,290 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_name", "arguments": "{}", "speech_id": "speech_e34bde38b08f", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:55,291 - [31mERROR[0m livekit.agents - exception occurred while executing tool
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 340, in get_client_name
    caller_number = self.rider_phone
AttributeError: 'Assistant' object has no attribute 'rider_phone'. Did you mean: 'rider_name'? [90m{"function": "get_client_name", "speech_id": "speech_e34bde38b08f", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:44:55,324 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_e34bde38b08f", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:03,286 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I am having a bit of trouble accessing your profile right now. Could you please tell me your full name?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:04 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.75') = 0.75
2025-10-15 15:45:04 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.75') = 0.75
2025-10-15 15:45:04,375 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.75') = 0.75 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:12 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: my full name is waseem akram
2025-10-15 15:45:12,173 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: my full name is waseem akram. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:12 - ivr_bot.main - INFO - [no-session] - User transcript received: my full name is waseem akram
2025-10-15 15:45:12,174 - [32mINFO[0m ivr_bot.main - User transcript received: my full name is waseem akram [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:14 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ✅ [VALIDATE_NAME] Name validated and stored: waseem akram
2025-10-15 15:45:14,882 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_and_store_rider_name", "arguments": "{\"rider_name\":\"waseem akram\"}", "speech_id": "speech_e81806fb7562", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:14 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [VALIDATE_NAME] Name validated and stored: waseem akram
2025-10-15 15:45:14,882 - [32mINFO[0m ivr_bot.helper_functions - ✅ [VALIDATE_NAME] Name validated and stored: waseem akram [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:14,904 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_e81806fb7562", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:22,799 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: It's nice to have you here, Waseem Akram. How can I help you today?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:23 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.6') completeness=Decimal('0.5') groundedness=Decimal('0.9') = 0.6666666666666666666666666667
2025-10-15 15:45:23 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.6') completeness=Decimal('0.5') groundedness=Decimal('0.9') = 0.6666666666666666666666666667
2025-10-15 15:45:23,822 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.6') completeness=Decimal('0.5') groundedness=Decimal('0.9') = 0.6666666666666666666666666667 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:35 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: i want to ride a trip
2025-10-15 15:45:35,880 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: i want to ride a trip. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:35 - ivr_bot.main - INFO - [no-session] - User transcript received: i want to ride a trip
2025-10-15 15:45:35,880 - [32mINFO[0m ivr_bot.main - User transcript received: i want to ride a trip [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:40,049 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Great! Where should I pick you up?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:45:41 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8
2025-10-15 15:45:41 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8
2025-10-15 15:45:41,141 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:45 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:50:45,185 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: 1 School Dr, Gaithersburg, MD 20878-2809, USA. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:45 - ivr_bot.main - INFO - [no-session] - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:50:45,186 - [32mINFO[0m ivr_bot.main - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:57 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: yes it correct
2025-10-15 15:50:57,142 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes it correct. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:57 - ivr_bot.main - INFO - [no-session] - User transcript received: yes it correct
2025-10-15 15:50:57,142 - [32mINFO[0m ivr_bot.main - User transcript received: yes it correct [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:57,218 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got 1 School Drive, Gaithersburg, MaryLand 20878-2809, USA. Is that correct?. interrupted: True [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:57,221 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:57,232 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-6550' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:50:58 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('0.95') = 0.85
2025-10-15 15:50:58 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('0.95') = 0.85
2025-10-15 15:50:58,420 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('0.95') = 0.85 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:01 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called get_valid_address function with address: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:51:01,711 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_valid_addresses", "arguments": "{\"address\":\"1 School Dr, Gaithersburg, MD 20878-2809, USA\"}", "speech_id": "speech_ef43aa5b50b9", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:01 - ivr_bot.side_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Dr, Gaithersburg, MD 20878-2809, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:51:01 - ivr_bot.helper_functions - INFO - [no-session] - Called get_valid_address function with address: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:51:01,711 - [32mINFO[0m ivr_bot.helper_functions - Called get_valid_address function with address: 1 School Dr, Gaithersburg, MD 20878-2809, USA [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:01 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Dr, Gaithersburg, MD 20878-2809, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:51:01,712 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Dr, Gaithersburg, MD 20878-2809, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting. [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:04,383 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me verify that address is valid. Please wait a moment.. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:05 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.7') = 0.7
2025-10-15 15:51:05 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.7') = 0.7
2025-10-15 15:51:05,619 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.7') = 0.7 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:05 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called check_bounds function
2025-10-15 15:51:05,793 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses Result from Web Search: {'valid': True, 'confidence': 100, 'normalized_address': '1 School Dr, Gaithersburg, MD 20878-2809, USA', 'latitude': 39.1192, 'longitude': -77.2154, 'error': ''} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:05 - ivr_bot.helper_functions - INFO - [no-session] - Called check_bounds function
2025-10-15 15:51:05,793 - [32mINFO[0m ivr_bot.helper_functions - Called check_bounds function [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:05,793 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:06 - ivr_bot.side_functions - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:51:06 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:51:06,797 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:06,798 - [36mDEBUG[0m ivr_bot.helper_functions - Bounds: {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:06,798 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_ef43aa5b50b9", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:11,607 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Your address is verified! Where are you headed?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:12 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:51:12 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:51:12,925 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:31 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: 2️⃣ Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:51:31,447 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: 2️⃣ Snowfall Rd, Gaithersburg, MD 20879, USA. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:31 - ivr_bot.main - INFO - [no-session] - User transcript received: 2️⃣ Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:51:31,447 - [32mINFO[0m ivr_bot.main - User transcript received: 2️⃣ Snowfall Rd, Gaithersburg, MD 20879, USA [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:39,256 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got 2 Snowfall Road, Gaithersburg, MaryLand 20879, USA. Is that correct?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:40 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.9166666666666666666666666667
2025-10-15 15:51:40 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.9166666666666666666666666667
2025-10-15 15:51:40,510 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.9166666666666666666666666667 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:45 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - User transcript received: yes its correct
2025-10-15 15:51:45,185 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes its correct. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:45 - ivr_bot.main - INFO - [no-session] - User transcript received: yes its correct
2025-10-15 15:51:45,186 - [32mINFO[0m ivr_bot.main - User transcript received: yes its correct [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:47 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called get_valid_address function with address: 2 Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:51:47 - ivr_bot.side_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
2 Snowfall Rd, Gaithersburg, MD 20879, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:51:47,632 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_valid_addresses", "arguments": "{\"address\":\"2 Snowfall Rd, Gaithersburg, MD 20879, USA\"}", "speech_id": "speech_971902eb774c", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:47 - ivr_bot.helper_functions - INFO - [no-session] - Called get_valid_address function with address: 2 Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:51:47,632 - [32mINFO[0m ivr_bot.helper_functions - Called get_valid_address function with address: 2 Snowfall Rd, Gaithersburg, MD 20879, USA [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:47 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
2 Snowfall Rd, Gaithersburg, MD 20879, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:51:47,633 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
2 Snowfall Rd, Gaithersburg, MD 20879, USA
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting. [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:52,838 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses Result from Web Search: {'valid': False, 'confidence': 0, 'normalized_address': '', 'latitude': None, 'longitude': None, 'error': 'Address not found'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:54 - ivr_bot.helper_functions - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Called check_bounds function
2025-10-15 15:51:54,457 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [GEOCODE] Response validated: lat='39.14397' lng='-77.20161' formatted_address='Gaithersburg, MD, USA' city='Gaithersburg' state='MD' zip_code='' [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:54 - ivr_bot.helper_functions - INFO - [no-session] - Called check_bounds function
2025-10-15 15:51:54,457 - [32mINFO[0m ivr_bot.helper_functions - Called check_bounds function [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:54,458 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:55 - ivr_bot.side_functions - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:51:55 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:51:55,473 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:55,474 - [36mDEBUG[0m ivr_bot.helper_functions - Bounds: {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:55,474 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses from ITC MAP API: {'Location_1': {'Address': 'Gaithersburg, MD, USA', 'Coordinates': {'lat': 39.14397, 'lng': -77.20161}, 'isWithinServiceArea': True}} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:55,474 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_971902eb774c", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:51:58,880 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me verify that address is valid. Please wait a moment.. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:00 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.4') completeness=Decimal('0.3') groundedness=Decimal('0.5') = 0.4
2025-10-15 15:52:00 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.4') completeness=Decimal('0.3') groundedness=Decimal('0.5') = 0.4
2025-10-15 15:52:00,072 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.4') completeness=Decimal('0.3') groundedness=Decimal('0.5') = 0.4 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:11,421 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: The address you provided is not fully verified as it only matches the city and state. Could you please provide another drop-off address?. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:12 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.55') groundedness=Decimal('0.6') = 0.55
2025-10-15 15:52:12 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.55') groundedness=Decimal('0.6') = 0.55
2025-10-15 15:52:12,420 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.55') groundedness=Decimal('0.6') = 0.55 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:16 - ivr_bot.supervisor - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - transfer_call_voice function called...
2025-10-15 15:52:16,917 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me transfer you to live agent. interrupted: False [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:16 - ivr_bot.supervisor - INFO - [no-session] - transfer_call_voice function called...
2025-10-15 15:52:16,918 - [32mINFO[0m ivr_bot.supervisor - transfer_call_voice function called... [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:52:17 - ivr_bot.supervisor - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Error during call transfer: TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 15:52:17 - ivr_bot.supervisor - ERROR - [no-session] - Error during call transfer: TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 15:52:17,625 - [31mERROR[0m ivr_bot.supervisor - Error during call transfer: TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400) [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:16,493 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_UEPmPmQKh4Bi"}[0m
2025-10-15 15:53:16,497 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:16,498 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:16,768 - [36mDEBUG[0m ivr_bot.main - supervisor score history: [{'relevance': '0.9', 'completeness': '0.85', 'groundedness': '0.95', 'average': '0.9'}, {'relevance': '0.8', 'completeness': '0.7', 'groundedness': '0.75', 'average': '0.75'}, {'relevance': '0.6', 'completeness': '0.5', 'groundedness': '0.9', 'average': '0.6666666666666666'}, {'relevance': '0.8', 'completeness': '0.7', 'groundedness': '0.9', 'average': '0.8'}, {'relevance': '0.85', 'completeness': '0.75', 'groundedness': '0.95', 'average': '0.85'}, {'relevance': '0.8', 'completeness': '0.6', 'groundedness': '0.7', 'average': '0.7'}, {'relevance': '0.9', 'completeness': '0.85', 'groundedness': '0.95', 'average': '0.9'}, {'relevance': '1.0', 'completeness': '0.75', 'groundedness': '1.0', 'average': '0.9166666666666666'}, {'relevance': '0.4', 'completeness': '0.3', 'groundedness': '0.5', 'average': '0.4'}, {'relevance': '0.5', 'completeness': '0.55', 'groundedness': '0.6', 'average': '0.55'}], length: 19 [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:17 - ivr_bot.main - INFO - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Database operation successful: InsertOneResult(ObjectId('68ef7d1c25319844fc80a5ea'), acknowledged=True)
2025-10-15 15:53:17 - ivr_bot.main - INFO - [no-session] - Database operation successful: InsertOneResult(ObjectId('68ef7d1c25319844fc80a5ea'), acknowledged=True)
2025-10-15 15:53:17,497 - [32mINFO[0m ivr_bot.main - Database operation successful: InsertOneResult(ObjectId('68ef7d1c25319844fc80a5ea'), acknowledged=True) [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:17,497 - [36mDEBUG[0m ivr_bot.main - Payload Sent: {'start_time': '2025-10-15 06:44:06', 'end_time': '2025-10-15 06:53:16', 'call_sid': 'chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7', 'cost': 0.09430444999999998, 'conversation_history': [{'speaker': 'Agent', 'transcription': 'I now have your information from Barwood and Regency Taxi  agency. Can I have your phone number please?', 'timestamp': '2025-10-15 15:44:40'}, {'speaker': 'User', 'transcription': '+12345678912', 'timestamp': '2025-10-15 15:44:44'}, {'speaker': 'Agent', 'transcription': 'Thank you for providing your phone number. Let me check your profile details. Please wait a moment.', 'timestamp': '2025-10-15 15:44:53'}, {'speaker': 'Agent', 'transcription': 'I am having a bit of trouble accessing your profile right now. Could you please tell me your full name?', 'timestamp': '2025-10-15 15:45:03'}, {'speaker': 'User', 'transcription': 'my full name is waseem akram', 'timestamp': '2025-10-15 15:45:12'}, {'speaker': 'Agent', 'transcription': "It's nice to have you here, Waseem Akram. How can I help you today?", 'timestamp': '2025-10-15 15:45:22'}, {'speaker': 'User', 'transcription': 'i want to ride a trip', 'timestamp': '2025-10-15 15:45:35'}, {'speaker': 'Agent', 'transcription': 'Great! Where should I pick you up?', 'timestamp': '2025-10-15 15:45:40'}, {'speaker': 'User', 'transcription': '1 School Dr, Gaithersburg, MD 20878-2809, USA', 'timestamp': '2025-10-15 15:50:45'}, {'speaker': 'User', 'transcription': 'yes it correct', 'timestamp': '2025-10-15 15:50:57'}, {'speaker': 'Agent', 'transcription': 'I got 1 School Drive, Gaithersburg, MaryLand 20878-2809, USA. Is that correct?', 'timestamp': '2025-10-15 15:50:57'}, {'speaker': 'Agent', 'transcription': 'Let me verify that address is valid. Please wait a moment.', 'timestamp': '2025-10-15 15:51:04'}, {'speaker': 'Agent', 'transcription': 'Your address is verified! Where are you headed?', 'timestamp': '2025-10-15 15:51:11'}, {'speaker': 'User', 'transcription': '2️⃣ Snowfall Rd, Gaithersburg, MD 20879, USA', 'timestamp': '2025-10-15 15:51:31'}, {'speaker': 'Agent', 'transcription': 'I got 2 Snowfall Road, Gaithersburg, MaryLand 20879, USA. Is that correct?', 'timestamp': '2025-10-15 15:51:39'}, {'speaker': 'User', 'transcription': 'yes its correct', 'timestamp': '2025-10-15 15:51:45'}, {'speaker': 'Agent', 'transcription': 'Let me verify that address is valid. Please wait a moment.', 'timestamp': '2025-10-15 15:51:58'}, {'speaker': 'Agent', 'transcription': 'The address you provided is not fully verified as it only matches the city and state. Could you please provide another drop-off address?', 'timestamp': '2025-10-15 15:52:11'}, {'speaker': 'Agent', 'transcription': 'Let me transfer you to live agent', 'timestamp': '2025-10-15 15:52:16'}]} [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:18 - ivr_bot.main - ERROR - [chat-58dd5961-e8b3-4acf-b0b8-71a33fa9b3c7] - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>

2025-10-15 15:53:18 - ivr_bot.main - ERROR - [no-session] - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>

2025-10-15 15:53:18,343 - [31mERROR[0m ivr_bot.main - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>
 [90m{"session_id": "no-session", "pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:18,345 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 44001, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:18,384 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 41660, "inference": true}[0m
2025-10-15 15:53:25,349 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:53:30,469 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 15:53:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:53:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:53:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:53:37 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:53:37,711 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 15:53:37,726 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 15:53:37,726 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 15:53:37,735 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 15:53:37,736 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_tXmpJNDSTcrL", "agent_name": ""}[0m
2025-10-15 15:53:42,108 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 47314, "inference": true}[0m
2025-10-15 15:53:42,116 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 47316}[0m
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 15:53:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 15:53:44,064 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 47314, "inference": true}[0m
2025-10-15 15:53:44,176 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 47316, "elapsed_time": 2.06}[0m
2025-10-15 15:53:44,176 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
VAAPI is supported.
2025-10-15 15:53:47 - ivr_bot.main - INFO - [no-session] - Call SID: chat-a30af3b0-22ea-4c65-b314-106437721fbd
2025-10-15 15:53:47 - ivr_bot.main - INFO - [no-session] - Call SID: chat-a30af3b0-22ea-4c65-b314-106437721fbd
2025-10-15 15:53:47,178 - [32mINFO[0m ivr_bot.main - Call SID: chat-a30af3b0-22ea-4c65-b314-106437721fbd [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Client ID None
2025-10-15 15:53:47 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 15:53:47 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:53:47 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 15:53:47,552 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Failed to initialize Agent with increased function call limits
2025-10-15 15:53:47 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 15:53:47,552 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:53:47 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Using pre-configured background audio player for typing sounds
2025-10-15 15:53:47,552 - [32mINFO[0m ivr_bot.helper_functions - ✅ [ASSISTANT_INIT] Validated initialization parameters [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 15:53:47,552 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 15:53:47,553 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:47,563 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:53,251 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 9.18671834199995, "pid": 47314, "inference": true}[0m
2025-10-15 15:53:53,251 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 47314, "inference": true}[0m
2025-10-15 15:53:53 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 15:53:53 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 15:53:53 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 15:53:53,730 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:53,731 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:53 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 15:53:53,731 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Initialized background audio player
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 15:53:54,575 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Started typing sounds for API fetching phase
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 15:53:54,577 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - {}
2025-10-15 15:53:54,595 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 15:53:54 - ivr_bot.main - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 15:53:54,595 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.cache_manager - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Cache HIT for affiliate: ids:1:21
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 15:53:54,596 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Using cached affiliate for IDs 1:21
2025-10-15 15:53:54,596 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 15:53:54,596 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,596 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Widget Flow chatbot Selected
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 15:53:54,596 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,597 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,597 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,597 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 15:53:54,597 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,598 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:54,598 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:55,312 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 47314, "inference": true, "elapsed_time": 13.2}[0m
2025-10-15 15:53:55,311 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 2.0594802649993653, "pid": 47314, "inference": true}[0m
2025-10-15 15:53:55,311 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 47314, "inference": true}[0m
2025-10-15 15:53:55,316 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 15:53:56 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:53:56 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:53:56,012 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:56 - ivr_bot.side_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 15:53:56,013 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:56,013 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:56 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 15:53:56,013 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:56,601 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_iBqq4ReiNki3", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 15:53:59 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Client ID -1
2025-10-15 15:53:59 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:53:59,663 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:59 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 15:53:59,663 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:59 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:53:59,663 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:59,663 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:53:59,664 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:01 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 15:54:01,416 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:01 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 15:54:01,416 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:01,416 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Building user context information
2025-10-15 15:54:02 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User context built successfully
2025-10-15 15:54:02 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 15:54:02 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Client ID -1
2025-10-15 15:54:02,418 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:54:02 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 15:54:02,418 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:54:02 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 15:54:02,419 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Failed to initialize Agent with increased function call limits
2025-10-15 15:54:02 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 15:54:02,419 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [ASSISTANT_INIT] Validated initialization parameters
2025-10-15 15:54:02,419 - [32mINFO[0m ivr_bot.helper_functions - ✅ [ASSISTANT_INIT] Validated initialization parameters [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 15:54:02,419 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Successfully updated initial_agent with enhanced context
2025-10-15 15:54:02 - ivr_bot.main - INFO - [no-session] - Successfully updated initial_agent with enhanced context
2025-10-15 15:54:02,420 - [32mINFO[0m ivr_bot.main - Successfully updated initial_agent with enhanced context [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Stopped typing sounds - API fetching complete
2025-10-15 15:54:02 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Preparing to deliver personalized follow-up message
2025-10-15 15:54:02 - ivr_bot.main - INFO - [no-session] - Stopped typing sounds - API fetching complete
2025-10-15 15:54:02,467 - [32mINFO[0m ivr_bot.main - Stopped typing sounds - API fetching complete [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:02 - ivr_bot.main - INFO - [no-session] - Preparing to deliver personalized follow-up message
2025-10-15 15:54:02,468 - [32mINFO[0m ivr_bot.main - Preparing to deliver personalized follow-up message [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:09 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - APIs fetched and processing complete. Audio input RE-ENABLED.
2025-10-15 15:54:09,985 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I now have your information from Barwood and Regency Taxi  agency. Can I have your phone number please?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:09 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Started phone number collection
2025-10-15 15:54:09,986 - [36mDEBUG[0m livekit.agents - input stream attached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:09 - ivr_bot.main - INFO - [no-session] - APIs fetched and processing complete. Audio input RE-ENABLED.
2025-10-15 15:54:09,986 - [32mINFO[0m ivr_bot.main - APIs fetched and processing complete. Audio input RE-ENABLED. [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:54:09 - ivr_bot.main - INFO - [no-session] - Started phone number collection
2025-10-15 15:54:09,986 - [32mINFO[0m ivr_bot.main - Started phone number collection [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:21 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: +12345678912
2025-10-15 15:56:21,175 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: +12345678912. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:21 - ivr_bot.main - INFO - [no-session] - User transcript received: +12345678912
2025-10-15 15:56:21,176 - [32mINFO[0m ivr_bot.main - User transcript received: +12345678912 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:23 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912
2025-10-15 15:56:23,602 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_and_store_phone_number", "arguments": "{\"phone_number\":\"+12345678912\"}", "speech_id": "speech_3c48fc526972", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:23 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912
2025-10-15 15:56:23,602 - [32mINFO[0m ivr_bot.helper_functions - ✅ [VALIDATE_PHONE] Phone validated and stored: +12345678912 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:23,617 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_3c48fc526972", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:36,499 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Thank you for providing your phone number. Let me check your profile details. Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:38,135 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_name", "arguments": "{}", "speech_id": "speech_0e333bfe0376", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:38,136 - [31mERROR[0m livekit.agents - exception occurred while executing tool
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 340, in get_client_name
    caller_number = self.rider_phone
AttributeError: 'Assistant' object has no attribute 'rider_phone'. Did you mean: 'rider_name'? [90m{"function": "get_client_name", "speech_id": "speech_0e333bfe0376", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:38,147 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_0e333bfe0376", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:38 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.9') = 0.8833333333333333333333333333
2025-10-15 15:56:38 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.9') = 0.8833333333333333333333333333
2025-10-15 15:56:38,323 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.9') = 0.8833333333333333333333333333 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:45,716 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I am having some trouble retrieving your profile right now. Could you please tell me your full name, please?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:56:47 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.4') = 0.6
2025-10-15 15:56:47 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.4') = 0.6
2025-10-15 15:56:47,043 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.6') groundedness=Decimal('0.4') = 0.6 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:48 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: waseem 
2025-10-15 15:57:48,068 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: waseem . interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:48 - ivr_bot.main - INFO - [no-session] - User transcript received: waseem 
2025-10-15 15:57:48,068 - [32mINFO[0m ivr_bot.main - User transcript received: waseem  [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:50 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ✅ [VALIDATE_NAME] Name validated and stored: waseem
2025-10-15 15:57:50,091 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_and_store_rider_name", "arguments": "{\"rider_name\":\"waseem\"}", "speech_id": "speech_215f57eea16d", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:50 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [VALIDATE_NAME] Name validated and stored: waseem
2025-10-15 15:57:50,092 - [32mINFO[0m ivr_bot.helper_functions - ✅ [VALIDATE_NAME] Name validated and stored: waseem [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:50,113 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_215f57eea16d", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:55,725 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: It's nice to have you here, Waseem. How can I help you today?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:57:56 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.75') completeness=Decimal('0.65') groundedness=Decimal('0.8') = 0.7333333333333333333333333333
2025-10-15 15:57:56 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.75') completeness=Decimal('0.65') groundedness=Decimal('0.8') = 0.7333333333333333333333333333
2025-10-15 15:57:56,883 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.75') completeness=Decimal('0.65') groundedness=Decimal('0.8') = 0.7333333333333333333333333333 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:04 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: i want to ride a trip
2025-10-15 15:58:04,059 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: i want to ride a trip. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:04 - ivr_bot.main - INFO - [no-session] - User transcript received: i want to ride a trip
2025-10-15 15:58:04,059 - [32mINFO[0m ivr_bot.main - User transcript received: i want to ride a trip [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:08,632 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Great! Where should I pick you up?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:09 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8
2025-10-15 15:58:09 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8
2025-10-15 15:58:09,797 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:27 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:58:27,083 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: 1 School Dr, Gaithersburg, MD 20878-2809, USA. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:27 - ivr_bot.main - INFO - [no-session] - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA
2025-10-15 15:58:27,083 - [32mINFO[0m ivr_bot.main - User transcript received: 1 School Dr, Gaithersburg, MD 20878-2809, USA [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:35,771 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got 1 School Drive, Gaithersburg, MaryLand 20878-2809. Is that correct?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:37 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.78') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.8266666666666666666666666667
2025-10-15 15:58:37 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.78') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.8266666666666666666666666667
2025-10-15 15:58:37,780 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.78') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.8266666666666666666666666667 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:41 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes its correct
2025-10-15 15:58:41,224 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes its correct. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:41 - ivr_bot.main - INFO - [no-session] - User transcript received: yes its correct
2025-10-15 15:58:41,224 - [32mINFO[0m ivr_bot.main - User transcript received: yes its correct [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:43 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called get_valid_address function with address: 1 School Drive, Gaithersburg, MaryLand 20878-2809
2025-10-15 15:58:43,989 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_valid_addresses", "arguments": "{\"address\":\"1 School Drive, Gaithersburg, MaryLand 20878-2809\"}", "speech_id": "speech_f450876fc4b9", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:43 - ivr_bot.side_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Drive, Gaithersburg, MaryLand 20878-2809
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:58:43 - ivr_bot.helper_functions - INFO - [no-session] - Called get_valid_address function with address: 1 School Drive, Gaithersburg, MaryLand 20878-2809
2025-10-15 15:58:43,989 - [32mINFO[0m ivr_bot.helper_functions - Called get_valid_address function with address: 1 School Drive, Gaithersburg, MaryLand 20878-2809 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:43 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Drive, Gaithersburg, MaryLand 20878-2809
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:58:43,989 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
1 School Drive, Gaithersburg, MaryLand 20878-2809
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting. [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:47 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called check_bounds function
2025-10-15 15:58:47,225 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses Result from Web Search: {'valid': True, 'confidence': 100, 'normalized_address': '1 School Dr, Gaithersburg, MD 20878-2809', 'latitude': 39.1192, 'longitude': -77.21539, 'error': ''} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:47 - ivr_bot.helper_functions - INFO - [no-session] - Called check_bounds function
2025-10-15 15:58:47,225 - [32mINFO[0m ivr_bot.helper_functions - Called check_bounds function [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:47,225 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:48 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:58:48 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:58:48,263 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:48,264 - [36mDEBUG[0m ivr_bot.helper_functions - Bounds: {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:48,265 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_f450876fc4b9", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:52,437 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me verify that address is valid. Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:53 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8166666666666666666666666667
2025-10-15 15:58:53 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8166666666666666666666666667
2025-10-15 15:58:53,777 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.7') groundedness=Decimal('0.9') = 0.8166666666666666666666666667 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:57,572 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Your address is verified! Where are you headed?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:58:58 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.8666666666666666666666666667
2025-10-15 15:58:58 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.8666666666666666666666666667
2025-10-15 15:58:58,706 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.75') groundedness=Decimal('1.0') = 0.8666666666666666666666666667 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:10 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:59:10,329 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: Snowfall Rd, Gaithersburg, MD 20879, USA. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:10 - ivr_bot.main - INFO - [no-session] - User transcript received: Snowfall Rd, Gaithersburg, MD 20879, USA
2025-10-15 15:59:10,330 - [32mINFO[0m ivr_bot.main - User transcript received: Snowfall Rd, Gaithersburg, MD 20879, USA [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:20,050 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got Snowfall Road, Gaithersburg, MaryLand 20879. Is that correct?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:21 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:59:21 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 15:59:21,152 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:21 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes its correct
2025-10-15 15:59:21,909 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes its correct. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:21 - ivr_bot.main - INFO - [no-session] - User transcript received: yes its correct
2025-10-15 15:59:21,909 - [32mINFO[0m ivr_bot.main - User transcript received: yes its correct [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:24 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called get_valid_address function with address: Snowfall Road, Gaithersburg, MaryLand 20879
2025-10-15 15:59:24 - ivr_bot.side_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
Snowfall Road, Gaithersburg, MaryLand 20879
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:59:24,036 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_valid_addresses", "arguments": "{\"address\":\"Snowfall Road, Gaithersburg, MaryLand 20879\"}", "speech_id": "speech_5dd45907a408", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:24 - ivr_bot.helper_functions - INFO - [no-session] - Called get_valid_address function with address: Snowfall Road, Gaithersburg, MaryLand 20879
2025-10-15 15:59:24,036 - [32mINFO[0m ivr_bot.helper_functions - Called get_valid_address function with address: Snowfall Road, Gaithersburg, MaryLand 20879 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:24 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
Snowfall Road, Gaithersburg, MaryLand 20879
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 15:59:24,036 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
Snowfall Road, Gaithersburg, MaryLand 20879
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting. [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:33,166 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me verify that address is valid. Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:34,229 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses Result from Web Search: {'valid': False, 'confidence': 80, 'normalized_address': '', 'latitude': None, 'longitude': None, 'error': "The address 'Snowfall Road, Gaithersburg, Maryland 20879' does not appear to exist. It may be a misspelling or incorrect. Please verify the street name and try again."} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:34 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.45') completeness=Decimal('0.3') groundedness=Decimal('0.75') = 0.50
2025-10-15 15:59:34 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.45') completeness=Decimal('0.3') groundedness=Decimal('0.75') = 0.50
2025-10-15 15:59:34,281 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.45') completeness=Decimal('0.3') groundedness=Decimal('0.75') = 0.50 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:36 - ivr_bot.helper_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [GEOCODE] Response validation failed: 1 validation error for GeocodeResponse
state
  String should have at least 2 characters [type=string_too_short, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/string_too_short
2025-10-15 15:59:36 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called check_bounds function
2025-10-15 15:59:36 - ivr_bot.helper_functions - ERROR - [no-session] - ❌ [GEOCODE] Response validation failed: 1 validation error for GeocodeResponse
state
  String should have at least 2 characters [type=string_too_short, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/string_too_short
2025-10-15 15:59:36,264 - [31mERROR[0m ivr_bot.helper_functions - ❌ [GEOCODE] Response validation failed: 1 validation error for GeocodeResponse
state
  String should have at least 2 characters [type=string_too_short, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/string_too_short [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:36 - ivr_bot.helper_functions - INFO - [no-session] - Called check_bounds function
2025-10-15 15:59:36,264 - [32mINFO[0m ivr_bot.helper_functions - Called check_bounds function [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:36,264 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:37 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:59:37 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 15:59:37,259 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:37,260 - [36mDEBUG[0m ivr_bot.helper_functions - Bounds: {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:37,260 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses from ITC MAP API: {'Location_1': {'Address': 'Snowfall Mine, National Forest Development Road 148, Lincoln County, Montana, United States', 'Coordinates': {'lat': 47.919384, 'lng': -115.482117}, 'isWithinServiceArea': False}} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:37,260 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_5dd45907a408", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:53,290 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: It seems like this address is outside of our service area. Can you please provide another drop-off address?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 15:59:54 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85
2025-10-15 15:59:54 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85
2025-10-15 15:59:54,491 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:36 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: Quince Orchard High School, 15800 Quince Orchard Rd, Gaithersburg, MD 20878
2025-10-15 16:00:36,459 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: Quince Orchard High School, 15800 Quince Orchard Rd, Gaithersburg, MD 20878. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:36 - ivr_bot.main - INFO - [no-session] - User transcript received: Quince Orchard High School, 15800 Quince Orchard Rd, Gaithersburg, MD 20878
2025-10-15 16:00:36,460 - [32mINFO[0m ivr_bot.main - User transcript received: Quince Orchard High School, 15800 Quince Orchard Rd, Gaithersburg, MD 20878 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:48,511 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got this address Quince Orchard High School, 15800 Quince Orchard Road, Gaithersburg, MaryLand 20878. Do I have that right?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:49 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.8') groundedness=Decimal('1.0') = 0.9333333333333333333333333333
2025-10-15 16:00:49 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.8') groundedness=Decimal('1.0') = 0.9333333333333333333333333333
2025-10-15 16:00:49,758 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('0.8') groundedness=Decimal('1.0') = 0.9333333333333333333333333333 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:53 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes it correct
2025-10-15 16:00:53,033 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes it correct. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:53 - ivr_bot.main - INFO - [no-session] - User transcript received: yes it correct
2025-10-15 16:00:53,033 - [32mINFO[0m ivr_bot.main - User transcript received: yes it correct [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:55 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called get_valid_address function with address: 15800 Quince Orchard Road, Gaithersburg, MaryLand 20878
2025-10-15 16:00:55 - ivr_bot.side_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
15800 Quince Orchard Road, Gaithersburg, MaryLand 20878
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 16:00:55,936 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_valid_addresses", "arguments": "{\"address\":\"15800 Quince Orchard Road, Gaithersburg, MaryLand 20878\"}", "speech_id": "speech_2faf7369365b", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:55 - ivr_bot.helper_functions - INFO - [no-session] - Called get_valid_address function with address: 15800 Quince Orchard Road, Gaithersburg, MaryLand 20878
2025-10-15 16:00:55,937 - [32mINFO[0m ivr_bot.helper_functions - Called get_valid_address function with address: 15800 Quince Orchard Road, Gaithersburg, MaryLand 20878 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:55 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
15800 Quince Orchard Road, Gaithersburg, MaryLand 20878
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting.
2025-10-15 16:00:55,937 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: Verify if this address is valid or not: 
```
15800 Quince Orchard Road, Gaithersburg, MaryLand 20878
```

Please respond ONLY with a valid JSON object in the following format:
{
    "valid": true/false,
    "confidence": 0-100,
    "normalized_address": "full normalized address if valid",
    "latitude": numeric value if valid (e.g., 38.9072),
    "longitude": numeric value if valid (e.g., -77.0369),
    "error": "reason if invalid or empty string if valid"
}

Ensure your response contains ONLY the JSON object with no additional text, explanation, or formatting. [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:00:59,269 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me verify that address is valid. Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:00 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.4') groundedness=Decimal('0.5') = 0.4666666666666666666666666667
2025-10-15 16:01:00 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.4') groundedness=Decimal('0.5') = 0.4666666666666666666666666667
2025-10-15 16:01:00,658 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.5') completeness=Decimal('0.4') groundedness=Decimal('0.5') = 0.4666666666666666666666666667 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:00 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called check_bounds function
2025-10-15 16:01:00,713 - [36mDEBUG[0m ivr_bot.helper_functions - Valid Addresses Result from Web Search: {'valid': True, 'confidence': 100, 'normalized_address': '15800 Quince Orchard Road, Gaithersburg, MD 20878', 'latitude': 39.1178, 'longitude': -77.2397, 'error': ''} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:00 - ivr_bot.helper_functions - INFO - [no-session] - Called check_bounds function
2025-10-15 16:01:00,713 - [32mINFO[0m ivr_bot.helper_functions - Called check_bounds function [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:00,713 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:01 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:01 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:01,618 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:01,618 - [36mDEBUG[0m ivr_bot.helper_functions - Bounds: {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:01,618 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_2faf7369365b", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:14,169 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Your address is verified! When would you like your ride to be scheduled?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:15 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0
2025-10-15 16:01:15 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0
2025-10-15 16:01:15,596 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:19 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes to at 4:00 pm
2025-10-15 16:01:19,703 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes to at 4:00 pm. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:19 - ivr_bot.main - INFO - [no-session] - User transcript received: yes to at 4:00 pm
2025-10-15 16:01:19,703 - [32mINFO[0m ivr_bot.main - User transcript received: yes to at 4:00 pm [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:25,378 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Just to confirm, you want to schedule your ride for 4:00 pm today, right?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:26 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0
2025-10-15 16:01:26 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0
2025-10-15 16:01:26,553 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('1.0') completeness=Decimal('1.0') groundedness=Decimal('1.0') = 1.0 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:28 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes
2025-10-15 16:01:28,816 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:28 - ivr_bot.main - INFO - [no-session] - User transcript received: yes
2025-10-15 16:01:28,817 - [32mINFO[0m ivr_bot.main - User transcript received: yes [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:38,046 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: How would you like to pay for your ride?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:39 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 16:01:39 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90
2025-10-15 16:01:39,193 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.9') completeness=Decimal('0.85') groundedness=Decimal('0.95') = 0.90 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:42 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: cash
2025-10-15 16:01:42,561 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: cash. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:42 - ivr_bot.main - INFO - [no-session] - User transcript received: cash
2025-10-15 16:01:42,562 - [32mINFO[0m ivr_bot.main - User transcript received: cash [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:46,635 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: I got cash. Do I have that right?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:47 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.67') completeness=Decimal('0.67') groundedness=Decimal('1.0') = 0.78
2025-10-15 16:01:47 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.67') completeness=Decimal('0.67') groundedness=Decimal('1.0') = 0.78
2025-10-15 16:01:47,810 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.67') completeness=Decimal('0.67') groundedness=Decimal('1.0') = 0.78 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:49 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: ues
2025-10-15 16:01:49,531 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: ues. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:49 - ivr_bot.main - INFO - [no-session] - User transcript received: ues
2025-10-15 16:01:49,531 - [32mINFO[0m ivr_bot.main - User transcript received: ues [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:52 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Called get_IDs function
2025-10-15 16:01:52,677 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_IDs", "arguments": "{\"params\":{\"account_\":\"cash\",\"payment_method\":\"cash\"}}", "speech_id": "speech_e33ffb81018c", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:52 - ivr_bot.helper_functions - INFO - [no-session] - Called get_IDs function
2025-10-15 16:01:52,677 - [32mINFO[0m ivr_bot.helper_functions - Called get_IDs function [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:52,677 - [36mDEBUG[0m ivr_bot.helper_functions - Confirmed Account Name: self [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:52,677 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:53 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:53 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:53,669 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:53,670 - [36mDEBUG[0m ivr_bot.helper_functions - Prompt sent for matching funding sources: 
            You are given a list of dictionaries enclosed in triple backticks: ```[{'FID': 1, 'FundingSource': 'Self', 'ProgramID': -1}, {'FID': 5, 'FundingSource': '1538 - ASBURY METHODIST VILLAGE', 'ProgramID': -1}, {'FID': 6, 'FundingSource': '1625 - PAINT BRANCH HIGH SCHOOL', 'ProgramID': -1}, {'FID': 19, 'FundingSource': "3198 - CHILDREN'S INN AT NIH", 'ProgramID': -1}, {'FID': 22, 'FundingSource': '3304 - CLASSIC RESIDENCE', 'ProgramID': -1}, {'FID': 24, 'FundingSource': '3360 - CONGREGATION BETH EL', 'ProgramID': -1}, {'FID': 25, 'FundingSource': '3361 - COLUMBIA LIGHTHOUSE ', 'ProgramID': -1}, {'FID': 26, 'FundingSource': '3511 - COUNCIL OF GOVERNMENTS', 'ProgramID': -1}, {'FID': 31, 'FundingSource': '4218 - DISTRICT COURT MD', 'ProgramID': -1}, {'FID': 33, 'FundingSource': '4258 - DORS GERMANTOWN', 'ProgramID': -1}, {'FID': 34, 'FundingSource': '4259 - DORS CUMBERLAND', 'ProgramID': -1}, {'FID': 36, 'FundingSource': '4390 - DHHU', 'ProgramID': -1}, {'FID': 38, 'FundingSource': '6083 - FSI MENTAL HEALTH CLINIC', 'ProgramID': -1}, {'FID': 44, 'FundingSource': '6476 - Frederick Co. Dept.Social Serv', 'ProgramID': -1}, {'FID': 45, 'FundingSource': '6480 - Kranke', 'ProgramID': -1}, {'FID': 47, 'FundingSource': '7057 - GALLAGHER ', 'ProgramID': -1}, {'FID': 52, 'FundingSource': '7308 - GLADSTONE ADVISERS, INC.', 'ProgramID': -1}, {'FID': 54, 'FundingSource': '7938 - DORS/WHEATON', 'ProgramID': -1}, {'FID': 56, 'FundingSource': '8141 - COVANCE MARKET ACCESS SERVICES', 'ProgramID': -1}, {'FID': 57, 'FundingSource': '8158 - HENRY M JACKSON FOUNDATION', 'ProgramID': -1}, {'FID': 60, 'FundingSource': '8370 - HOLY CROSS HEALTH CENTER', 'ProgramID': -1}, {'FID': 61, 'FundingSource': '8385 - HOWARD HUGHES MED', 'ProgramID': -1}, {'FID': 62, 'FundingSource': '8429 - HOLY CROSS HOSP HLTH CNT', 'ProgramID': -1}, {'FID': 68, 'FundingSource': '10043 - JHHC/PRIORITY PARTNERS', 'ProgramID': -1}, {'FID': 69, 'FundingSource': '10132 - JFGH', 'ProgramID': -1}, {'FID': 344, 'FundingSource': 'APP', 'ProgramID': -1}, {'FID': 345, 'FundingSource': 'APS RIS', 'ProgramID': -1}, {'FID': 346, 'FundingSource': 'ARH', 'ProgramID': -1}, {'FID': 355, 'FundingSource': 'CRISIS', 'ProgramID': -1}, {'FID': 356, 'FundingSource': 'CSN', 'ProgramID': -1}, {'FID': 357, 'FundingSource': 'CSS', 'ProgramID': -1}, {'FID': 358, 'FundingSource': 'CY MARRIOTT', 'ProgramID': -1}, {'FID': 419, 'FundingSource': '72286 - Knaff', 'ProgramID': -1}, {'FID': 420, 'FundingSource': 'ROC', 'ProgramID': -1}, {'FID': 421, 'FundingSource': '72304 - Imagine Hope', 'ProgramID': -1}, {'FID': 85, 'FundingSource': '13224 - MMG NIAID', 'ProgramID': -1}, {'FID': 86, 'FundingSource': '13278 - Kensington Park Senior Living', 'ProgramID': -1}, {'FID': 88, 'FundingSource': '13310 - MedStar Family Choice BU#70771', 'ProgramID': -1}, {'FID': 91, 'FundingSource': '13407 - MCPS Dr. Bell', 'ProgramID': -1}, {'FID': 92, 'FundingSource': '13411 - MOCO COALITION/HOMELESS', 'ProgramID': -1}, {'FID': 96, 'FundingSource': '13433 - MCPS ASSESSMENT SVC UNIT', 'ProgramID': -1}, {'FID': 99, 'FundingSource': '13732 - MORRISON ', 'ProgramID': -1}, {'FID': 101, 'FundingSource': 'MEDICAID', 'ProgramID': -1}, {'FID': 111, 'FundingSource': '15045 - OBVS/DORS WHEATON', 'ProgramID': -1}, {'FID': 113, 'FundingSource': '16131 - PERKINS COIE LLP', 'ProgramID': -1}, {'FID': 118, 'FundingSource': '18270 - RICA STATE MD', 'ProgramID': -1}, {'FID': 127, 'FundingSource': '19280 - FJC', 'ProgramID': -1}, {'FID': 134, 'FundingSource': '19519 - STEPPING STONES', 'ProgramID': -1}, {'FID': 141, 'FundingSource': '20480 - TREE HOUSE', 'ProgramID': -1}, {'FID': 143, 'FundingSource': 'CALLM', 'ProgramID': -1}, {'FID': 145, 'FundingSource': '23130 - WESTAT', 'ProgramID': -1}, {'FID': 147, 'FundingSource': '23215 - WILMER EYE INSTITUTE', 'ProgramID': -1}, {'FID': 154, 'FundingSource': 'NIH', 'ProgramID': -1}, {'FID': 164, 'FundingSource': '71707 - Sunrise of Silver Spring', 'ProgramID': -1}, {'FID': 165, 'FundingSource': '71714 - FOX HILL', 'ProgramID': -1}, {'FID': 186, 'FundingSource': '72124 - C. Wm. Neuhauser', 'ProgramID': -1}, {'FID': 196, 'FundingSource': '72189 - People Encouraging People', 'ProgramID': -1}, {'FID': 199, 'FundingSource': '72207 - Abe M. Schuchman, Esq., CEO', 'ProgramID': -1}, {'FID': 200, 'FundingSource': '72208 - BENJAMIN & SUSAN AIKEN', 'ProgramID': -1}, {'FID': 214, 'FundingSource': '72233 - GENERAL DYNAMICS IT', 'ProgramID': -1}, {'FID': 215, 'FundingSource': '72234 - CAROL BERGIN', 'ProgramID': -1}, {'FID': 216, 'FundingSource': '72235 - BARBARA V. WEST', 'ProgramID': -1}, {'FID': 224, 'FundingSource': '79999 - BILL SAPP', 'ProgramID': -1}, {'FID': 227, 'FundingSource': '81064 - MEDSTAR HEALTH', 'ProgramID': -1}, {'FID': 244, 'FundingSource': '13298 - MACROGENICS, INC.', 'ProgramID': -1}, {'FID': 246, 'FundingSource': '4370 - DORS Devi Tiwari', 'ProgramID': -1}, {'FID': 248, 'FundingSource': '72243 - Amy Rogus', 'ProgramID': -1}, {'FID': 259, 'FundingSource': '71695 - TODD IRWIN', 'ProgramID': -1}, {'FID': 262, 'FundingSource': '77777 - BW', 'ProgramID': -1}, {'FID': 266, 'FundingSource': '4330 - DORS', 'ProgramID': -1}, {'FID': 267, 'FundingSource': '4340 - DORS', 'ProgramID': -1}, {'FID': 269, 'FundingSource': 'WMATA', 'ProgramID': -1}, {'FID': 270, 'FundingSource': 'WMATAPromo', 'ProgramID': -1}, {'FID': 271, 'FundingSource': '3230 - Rockville Call n Ride', 'ProgramID': -1}, {'FID': 273, 'FundingSource': 'SMART', 'ProgramID': -1}, {'FID': 280, 'FundingSource': '3575 - CW YOUNG', 'ProgramID': -1}, {'FID': 281, 'FundingSource': '72251 - People Encouraging People', 'ProgramID': -1}, {'FID': 287, 'FundingSource': '13189 - MontCare Potomac', 'ProgramID': -1}, {'FID': 313, 'FundingSource': '8475 -  HOC', 'ProgramID': -1}, {'FID': 314, 'FundingSource': '4310 - DORS', 'ProgramID': -1}, {'FID': 317, 'FundingSource': '4320 - DORS', 'ProgramID': -1}, {'FID': 319, 'FundingSource': '72290 - PEP3', 'ProgramID': -1}, {'FID': 323, 'FundingSource': 'CHI Promo', 'ProgramID': -1}, {'FID': 324, 'FundingSource': 'CHI', 'ProgramID': -1}, {'FID': 325, 'FundingSource': 'CHIW', 'ProgramID': -1}, {'FID': 327, 'FundingSource': '4252 - DORS VTS', 'ProgramID': -1}, {'FID': 329, 'FundingSource': '72280 - Price', 'ProgramID': -1}, {'FID': 331, 'FundingSource': '72298 - Carter', 'ProgramID': -1}, {'FID': 333, 'FundingSource': '72296 - Murphy', 'ProgramID': -1}, {'FID': 340, 'FundingSource': '72325 - RAINBOW', 'ProgramID': -1}, {'FID': 343, 'FundingSource': 'AFC', 'ProgramID': -1}, {'FID': 347, 'FundingSource': 'BBH', 'ProgramID': -1}, {'FID': 348, 'FundingSource': 'Bender', 'ProgramID': -1}, {'FID': 349, 'FundingSource': 'BOLGER', 'ProgramID': -1}, {'FID': 351, 'FundingSource': 'CDE', 'ProgramID': -1}, {'FID': 352, 'FundingSource': 'CMMC', 'ProgramID': -1}, {'FID': 353, 'FundingSource': 'CMRI', 'ProgramID': -1}, {'FID': 354, 'FundingSource': 'CPU', 'ProgramID': -1}, {'FID': 359, 'FundingSource': 'DVR', 'ProgramID': -1}, {'FID': 360, 'FundingSource': 'DVRGERM', 'ProgramID': -1}, {'FID': 362, 'FundingSource': 'ERSERV', 'ProgramID': -1}, {'FID': 366, 'FundingSource': 'HELP', 'ProgramID': -1}, {'FID': 367, 'FundingSource': 'HHS A AND D', 'ProgramID': -1}, {'FID': 368, 'FundingSource': 'HHSIT', 'ProgramID': -1}, {'FID': 369, 'FundingSource': 'HHSW', 'ProgramID': -1}, {'FID': 370, 'FundingSource': 'HJF', 'ProgramID': -1}, {'FID': 371, 'FundingSource': 'HUGHES', 'ProgramID': -1}, {'FID': 373, 'FundingSource': 'JCA', 'ProgramID': -1}, {'FID': 374, 'FundingSource': 'JCC', 'ProgramID': -1}, {'FID': 375, 'FundingSource': 'JSSA', 'ProgramID': -1}, {'FID': 376, 'FundingSource': 'CLUSTERPROJ', 'ProgramID': -1}, {'FID': 377, 'FundingSource': 'L2L', 'ProgramID': -1}, {'FID': 378, 'FundingSource': 'LIFE', 'ProgramID': -1}, {'FID': 379, 'FundingSource': 'LMH', 'ProgramID': -1}, {'FID': 380, 'FundingSource': 'MANORB', 'ProgramID': -1}, {'FID': 382, 'FundingSource': 'MarriottGWC', 'ProgramID': -1}, {'FID': 383, 'FundingSource': 'MaxCohen', 'ProgramID': -1}, {'FID': 384, 'FundingSource': 'MCCC', 'ProgramID': -1}, {'FID': 385, 'FundingSource': 'MCFF', 'ProgramID': -1}, {'FID': 386, 'FundingSource': 'MCPS', 'ProgramID': -1}, {'FID': 387, 'FundingSource': 'MCPS-BOE', 'ProgramID': -1}, {'FID': 389, 'FundingSource': 'MDC', 'ProgramID': -1}, {'FID': 390, 'FundingSource': 'MDDS', 'ProgramID': -1}, {'FID': 393, 'FundingSource': 'MSGP', 'ProgramID': -1}, {'FID': 394, 'FundingSource': 'NCCF', 'ProgramID': -1}, {'FID': 396, 'FundingSource': 'ONC-SUB', 'ProgramID': -1}, {'FID': 398, 'FundingSource': 'RCM', 'ProgramID': -1}, {'FID': 400, 'FundingSource': 'SASCA', 'ProgramID': -1}, {'FID': 401, 'FundingSource': 'SCMC', 'ProgramID': -1}, {'FID': 403, 'FundingSource': 'SGAH', 'ProgramID': -1}, {'FID': 404, 'FundingSource': 'SGAR', 'ProgramID': -1}, {'FID': 405, 'FundingSource': 'SHS MARRIOTT', 'ProgramID': -1}, {'FID': 408, 'FundingSource': 'SUB', 'ProgramID': -1}, {'FID': 409, 'FundingSource': 'TEAMIV DHHS', 'ProgramID': -1}, {'FID': 410, 'FundingSource': 'THERED', 'ProgramID': -1}, {'FID': 411, 'FundingSource': 'VASAP', 'ProgramID': -1}, {'FID': 416, 'FundingSource': 'Safety Net Program HHSTV', 'ProgramID': -1}, {'FID': 417, 'FundingSource': 'Bethesda Cares Inc', 'ProgramID': -1}, {'FID': 423, 'FundingSource': '72330 - Offen', 'ProgramID': -1}, {'FID': 424, 'FundingSource': 'BROKER', 'ProgramID': -1}, {'FID': 430, 'FundingSource': '19267 - Shulman', 'ProgramID': -1}, {'FID': 431, 'FundingSource': 'WUMCO', 'ProgramID': -1}, {'FID': 432, 'FundingSource': '72338 - Springbrook HS', 'ProgramID': -1}, {'FID': 433, 'FundingSource': '14300 - NCCCC', 'ProgramID': -1}, {'FID': 434, 'FundingSource': '4410 - DORS Hagerstown', 'ProgramID': -1}, {'FID': 435, 'FundingSource': '72341 - Solera', 'ProgramID': -1}, {'FID': 436, 'FundingSource': 'RTH-CHIW', 'ProgramID': -1}, {'FID': 437, 'FundingSource': 'RTH-WMATA', 'ProgramID': -1}, {'FID': 438, 'FundingSource': '72318 - Lawrence', 'ProgramID': -1}, {'FID': 519, 'FundingSource': 'REGENCY', 'ProgramID': -1}, {'FID': 544, 'FundingSource': 'TestFS', 'ProgramID': -1}, {'FID': 549, 'FundingSource': 'CHI-SHOP', 'ProgramID': -1}, {'FID': 550, 'FundingSource': 'Barwood', 'ProgramID': -1}, {'FID': 552, 'FundingSource': 'Delivery', 'ProgramID': -1}, {'FID': 555, 'FundingSource': '72345 - Ittner', 'ProgramID': -1}, {'FID': 557, 'FundingSource': '666', 'ProgramID': -1}, {'FID': 559, 'FundingSource': '16439 - PCC 1', 'ProgramID': -1}, {'FID': 563, 'FundingSource': '72333 - Maplewood', 'ProgramID': -1}, {'FID': 565, 'FundingSource': 'ECOZ', 'ProgramID': -1}, {'FID': 566, 'FundingSource': 'FCTC', 'ProgramID': -1}, {'FID': 567, 'FundingSource': '72348 - Grunder', 'ProgramID': -1}, {'FID': 568, 'FundingSource': '4380 - DORS Alison', 'ProgramID': -1}, {'FID': 569, 'FundingSource': 'BOOST', 'ProgramID': -1}, {'FID': 571, 'FundingSource': 'NEWC', 'ProgramID': -1}, {'FID': 572, 'FundingSource': 'CABH', 'ProgramID': -1}, {'FID': 573, 'FundingSource': '72352 - Cook', 'ProgramID': -1}, {'FID': 574, 'FundingSource': 'HHSELC', 'ProgramID': -1}, {'FID': 576, 'FundingSource': '72355 - Sterling', 'ProgramID': -1}, {'FID': 577, 'FundingSource': '4425 -DORS Westminster', 'ProgramID': -1}, {'FID': 578, 'FundingSource': '4395 - DORS Toi Glover', 'ProgramID': -1}, {'FID': 579, 'FundingSource': '4265 - DORS Alisson Lopez', 'ProgramID': -1}, {'FID': 580, 'FundingSource': '72363 - GHC', 'ProgramID': -1}, {'FID': 581, 'FundingSource': '72374 - Wolf', 'ProgramID': -1}, {'FID': 582, 'FundingSource': 'ABH', 'ProgramID': -1}, {'FID': 583, 'FundingSource': '23076 - WRS', 'ProgramID': -1}, {'FID': 584, 'FundingSource': '72378 - MCFOF', 'ProgramID': -1}, {'FID': 586, 'FundingSource': '72382 - Kleit', 'ProgramID': -1}, {'FID': 587, 'FundingSource': '72386 - States Atty', 'ProgramID': -1}, {'FID': 588, 'FundingSource': '72391 - RegencyCare', 'ProgramID': -1}, {'FID': 589, 'FundingSource': '72396 - SIDEM', 'ProgramID': -1}, {'FID': 590, 'FundingSource': 'CDP', 'ProgramID': -1}, {'FID': 591, 'FundingSource': 'HHSPP', 'ProgramID': -1}, {'FID': 598, 'FundingSource': 'TGI', 'ProgramID': -1}, {'FID': 599, 'FundingSource': 'HHSTC', 'ProgramID': -1}, {'FID': 600, 'FundingSource': '16500 - PCC BHP', 'ProgramID': -1}, {'FID': 601, 'FundingSource': '16600 - PCC PA', 'ProgramID': -1}, {'FID': 602, 'FundingSource': '6215 - Fox Chase', 'ProgramID': -1}, {'FID': 603, 'FundingSource': '72412 - Independence Now', 'ProgramID': -1}, {'FID': 604, 'FundingSource': '4275 - DORS Baltimore', 'ProgramID': -1}, {'FID': 605, 'FundingSource': '4440 - DORS Frederick', 'ProgramID': -1}, {'FID': 58, 'FundingSource': '8350 - Holy Cross Hospital Germantown', 'ProgramID': -1}, {'FID': 59, 'FundingSource': '8360 - HOLY CROSS HEALTH CENTER', 'ProgramID': -1}, {'FID': 97, 'FundingSource': '13435 - MOCO HHS CHILD WELFARE', 'ProgramID': -1}, {'FID': 137, 'FundingSource': '19637 - HOLY CROSS HOSPITAL', 'ProgramID': -1}, {'FID': 592, 'FundingSource': '72401 - Shrader', 'ProgramID': -1}, {'FID': 593, 'FundingSource': '4430 - DORS WHEATON', 'ProgramID': -1}, {'FID': 594, 'FundingSource': '4551 - DORS Angelina Jordan', 'ProgramID': -1}, {'FID': 595, 'FundingSource': '12301 - Little Bennet ES', 'ProgramID': -1}, {'FID': 596, 'FundingSource': '72405 - Edson', 'ProgramID': -1}, {'FID': 597, 'FundingSource': '4260 - DORS Andrew Park', 'ProgramID': -1}]```

            Your task is to find the dictionary whose 'FundingSource' value closely matches the account enclosed in double quotes: ``self``. 

            Return the matching dictionary in JSON format with the following fields:

            {
                "FundingSource": "Source Name",
                "FID": FID Value,
                "ProgramID": ProgramID Value
            }

            Instructions:
            1. If a match is found, return the corresponding dictionary in the specified JSON format.
            2. If no match is found, return the following JSON:
                
            {
                "FundingSource": "None",
                "FID": 1,
                "ProgramID": -1
            }

            # Instructions
            ## Make sure the response contains only the JSON output, with nothing else.
            ## Take care of spelling mistakes by STT as well. For example 'Vomata' refers to 'WMATA'.
            ## Do not add backticks or 'json'. I am parsing the response with json.loads(). Make it compatible.
             [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:55,930 - [36mDEBUG[0m ivr_bot.helper_functions - Matching Response: {
    "FundingSource": "Self",
    "FID": 1,
    "ProgramID": -1
} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:55,930 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,689 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me get necessary details regarding your payment method! Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56 - ivr_bot.side_functions - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:56 - ivr_bot.side_functions - ERROR - [no-session] - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden
2025-10-15 16:01:56,916 - [31mERROR[0m ivr_bot.side_functions - ❌ [AFFILIATE_DETAILS] Response validation failed: 12 validation errors for AffiliateData
AffiliateID
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
ContactName
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y1
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
X2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Y2
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Address
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
City
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
State
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Zipcode
  Field required [type=missing, input_value={'AffiliateBounds': '37.1...898,-76.28661650301018'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
AffiliateBounds
  Extra inputs are not permitted [type=extra_forbidden, input_value='37.175108867393085,-80.5...0898,-76.28661650301018', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/extra_forbidden [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,917 - [36mDEBUG[0m ivr_bot.helper_functions - Got Program Id: -1 [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,917 - [36mDEBUG[0m ivr_bot.helper_functions - Got Funding Source Id: 1 [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,917 - [36mDEBUG[0m ivr_bot.helper_functions - Funding Source List: ['1', '561', '278', '324', '357'] [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,918 - [36mDEBUG[0m ivr_bot.helper_functions - Selected Account Name: Self [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,918 - [36mDEBUG[0m ivr_bot.helper_functions - Got Copay Status: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:56,918 - [36mDEBUG[0m ivr_bot.helper_functions - Payload Sent for Payment Type Selection: {'iaffiliateid': '21'} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:57 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.7') completeness=Decimal('0.6') groundedness=Decimal('0.8') = 0.7
2025-10-15 16:01:57 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.7') completeness=Decimal('0.6') groundedness=Decimal('0.8') = 0.7
2025-10-15 16:01:57,931 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.7') completeness=Decimal('0.6') groundedness=Decimal('0.8') = 0.7 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:58 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - ✅ [PAYMENT_API] Response validated: funding_source_id='1' payment_type_id='1' account_name=None
2025-10-15 16:01:58 - ivr_bot.helper_functions - INFO - [no-session] - ✅ [PAYMENT_API] Response validated: funding_source_id='1' payment_type_id='1' account_name=None
2025-10-15 16:01:58,018 - [32mINFO[0m ivr_bot.helper_functions - ✅ [PAYMENT_API] Response validated: funding_source_id='1' payment_type_id='1' account_name=None [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:58,018 - [36mDEBUG[0m ivr_bot.helper_functions - Prompt sent for matching funding sources: 
                                    You are given a list of dictionaries enclosed in triple backticks: ```[{'PaymentType ID': 1, 'PaymentType Name': 'Cash', 'Affiliate ID': 21}, {'PaymentType ID': 2, 'PaymentType Name': 'Credit Card', 'Affiliate ID': 21}, {'PaymentType ID': 3, 'PaymentType Name': 'Rockville C&R', 'Affiliate ID': 21}, {'PaymentType ID': 4, 'PaymentType Name': 'CHI Center-V', 'Affiliate ID': 21}, {'PaymentType ID': 5, 'PaymentType Name': 'Other Voucher', 'Affiliate ID': 21}, {'PaymentType ID': 6, 'PaymentType Name': 'Meditran-V', 'Affiliate ID': 21}, {'PaymentType ID': 7, 'PaymentType Name': 'Call& R-V', 'Affiliate ID': 21}, {'PaymentType ID': 8, 'PaymentType Name': 'Corporate-V', 'Affiliate ID': 21}, {'PaymentType ID': 9, 'PaymentType Name': 'Non-Dedicated WMATA', 'Affiliate ID': 21}, {'PaymentType ID': 10, 'PaymentType Name': 'NIH-V', 'Affiliate ID': 21}, {'PaymentType ID': 11, 'PaymentType Name': 'MCPS', 'Affiliate ID': 21}, {'PaymentType ID': 12, 'PaymentType Name': 'WMATA ABILITY RIDE', 'Affiliate ID': 21}, {'PaymentType ID': 13, 'PaymentType Name': 'Airport', 'Affiliate ID': 21}, {'PaymentType ID': 14, 'PaymentType Name': 'WMATA ABILITY RIDE', 'Affiliate ID': 21}]```

                                    Your task is to find the dictionary whose 'PaymentType Name' value closely matches
                                     the account enclosed in double quotes: ``cash``

                                    Return the matching dictionary in JSON format with the following fields:

                                    {
                                        "PaymentType ID": Payment Type ID Value,
                                        "PaymentType Name": "Payment Type Name",
                                        "Affiliate ID": Affiliate ID Value
                                    }

                                    Instructions:
                                    1. If a match is found, return the corresponding dictionary in the specified JSON format.
                                    2. If no match is found, return the following JSON:
                                        
                                    {
                                        "PaymentType ID": 1,
                                        "PaymentType Name": "None",
                                        "Affiliate ID": -1
                                    }

                                    # Instructions
                                    ## Make sure the response contains only the JSON output, with nothing else.
                                    ## Take care of spelling mistakes by STT as well. For example 'Vomata' refers to 'WMATA'.
                                    ## Do not add backticks or 'json'. I am parsing the response with json.loads(). Make it compatible.
                                     [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:58 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1
2025-10-15 16:01:58,927 - [36mDEBUG[0m ivr_bot.helper_functions - Matching Response: {
    "PaymentType ID": 1,
    "PaymentType Name": "Cash",
    "Affiliate ID": 21
} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:58 - ivr_bot.helper_functions - INFO - [no-session] - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1
2025-10-15 16:01:58,927 - [32mINFO[0m ivr_bot.helper_functions - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:01:58,927 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_e33ffb81018c", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:06,261 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Your account cash is verified. Do you have any special requirements or additional notes for the driver?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:07 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85
2025-10-15 16:02:07 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85
2025-10-15 16:02:07,616 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.85') completeness=Decimal('0.8') groundedness=Decimal('0.9') = 0.85 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:25 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: no i do not have Additional requirements 
2025-10-15 16:02:25,844 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: no i do not have Additional requirements . interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:25 - ivr_bot.main - INFO - [no-session] - User transcript received: no i do not have Additional requirements 
2025-10-15 16:02:25,844 - [32mINFO[0m ivr_bot.main - User transcript received: no i do not have Additional requirements  [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:54 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - User transcript received: yes all is correct
2025-10-15 16:02:54,723 - [36mDEBUG[0m ivr_bot.main - Conversation item added from user: yes all is correct. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:54 - ivr_bot.main - INFO - [no-session] - User transcript received: yes all is correct
2025-10-15 16:02:54,731 - [32mINFO[0m ivr_bot.main - User transcript received: yes all is correct [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:54,846 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: Let me confirm your trip details:
- Pick-up: 1 School Drive, Gaithersburg, MaryLand
- Drop-off: 15800 Quince Orchard Road, Gaithersburg, MaryLand
- Time: 4:00 pm
- Payment method: cash
- There are no special instructions

Is all the information correct for this trip?. interrupted: True [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:54,847 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:54,860 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-15520' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:55,947 - [36mDEBUG[0m ivr_bot.supervisor - [supervisor llm response] Your trip is confirmed for 4:00 pm from 1 School Drive to 15800 Quince Orchard Road. Thank you! [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:02:55 - ivr_bot.supervisor - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score parse error] Expecting value: line 1 column 1 (char 0)
2025-10-15 16:02:55 - ivr_bot.supervisor - ERROR - [no-session] - [supervisor score parse error] Expecting value: line 1 column 1 (char 0)
2025-10-15 16:02:55,947 - [31mERROR[0m ivr_bot.supervisor - [supervisor score parse error] Expecting value: line 1 column 1 (char 0) [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:00 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Tier 1 validation passed: Format validation successful
2025-10-15 16:03:00,297 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"rider_name\":\"waseem\",\"home_phone\":\"+12345678912\",\"office_phone\":\"\",\"pickup_phone_number\":\"\",\"dropoff_phone_number\":\"\",\"client_id\":\"-1\",\"funding_source_id\":\"1\",\"payment_type_id\":\"1\",\"copay_funding_source_id\":\"-1\",\"copay_payment_type_id\":\"-1\",\"rider_id\":\"-1\",\"booking_time\":\"2025-10-15 16:00\",\"will_call_day\":\"\",\"pickup_lat\":\"39.1192\",\"pickup_lng\":\"-77.21539\",\"dropoff_lat\":\"39.1178\",\"dropoff_lng\":\"-77.2397\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_schedule\":\"1\",\"is_will_call\":false,\"pickup_city_zip_code\":\"20878-2809\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"extra_details\":\"\",\"pickup_remarks\":\"\",\"dropoff_remarks\":\"\"}}", "speech_id": "speech_ca702d8c37b4", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:00 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]}
2025-10-15 16:03:00 - ivr_bot.helper_functions - INFO - [no-session] - Tier 1 validation passed: Format validation successful
2025-10-15 16:03:00,297 - [32mINFO[0m ivr_bot.helper_functions - Tier 1 validation passed: Format validation successful [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:00 - ivr_bot.helper_functions - WARNING - [no-session] - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]}
2025-10-15 16:03:00,298 - [33mWARNING[0m ivr_bot.helper_functions - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]} [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:00,299 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_ca702d8c37b4", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:08 - ivr_bot.helper_functions - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Tier 1 validation passed: Format validation successful
2025-10-15 16:03:08,075 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"rider_name\":\"waseem\",\"home_phone\":\"+12345678912\",\"office_phone\":\"\",\"pickup_phone_number\":\"\",\"dropoff_phone_number\":\"\",\"client_id\":\"-1\",\"funding_source_id\":\"1\",\"payment_type_id\":\"1\",\"copay_funding_source_id\":\"-1\",\"copay_payment_type_id\":\"-1\",\"rider_id\":\"-1\",\"booking_time\":\"2025-10-15 16:00\",\"will_call_day\":\"\",\"pickup_lat\":\"39.1192\",\"pickup_lng\":\"-77.21539\",\"dropoff_lat\":\"39.1178\",\"dropoff_lng\":\"-77.2397\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_schedule\":\"1\",\"is_will_call\":false,\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"extra_details\":\"\",\"pickup_remarks\":\"\",\"dropoff_remarks\":\"\"}}", "speech_id": "speech_57679d9803be", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:08 - ivr_bot.helper_functions - WARNING - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]}
2025-10-15 16:03:08 - ivr_bot.helper_functions - INFO - [no-session] - Tier 1 validation passed: Format validation successful
2025-10-15 16:03:08,075 - [32mINFO[0m ivr_bot.helper_functions - Tier 1 validation passed: Format validation successful [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:08 - ivr_bot.helper_functions - WARNING - [no-session] - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]}
2025-10-15 16:03:08,076 - [33mWARNING[0m ivr_bot.helper_functions - Tier 2 validation failed: {'error': 'ValidationError', 'details': [{'loc': ['generalInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['riderInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['insuranceInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['routeSettingInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['systemConfigInfo'], 'msg': 'Field required', 'type': 'missing'}, {'loc': ['pickup_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_street_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_name'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['home_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['office_phone'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_phone_number'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['client_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_funding_source_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['copay_payment_type_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_id'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['booking_time'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['will_call_day'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lat'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_lng'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_wheel_chairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['number_of_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_passengers'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['total_wheelchairs'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_schedule'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['is_will_call'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_city_zip_code'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_address'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_city'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['rider_home_state'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['extra_details'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['pickup_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}, {'loc': ['dropoff_remarks'], 'msg': 'Extra inputs are not permitted', 'type': 'extra_forbidden'}]} [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:08,086 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_57679d9803be", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:09,786 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: It seems there was an issue with the trip details I submitted. Let me try again to book your ride. Please wait a moment.. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:11 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.6') = 0.7
2025-10-15 16:03:11 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.6') = 0.7
2025-10-15 16:03:11,187 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.6') = 0.7 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:20,730 - [36mDEBUG[0m ivr_bot.main - Conversation item added from assistant: It looks like there is a technical issue with booking your trip right now. I apologize for the inconvenience. Would you like me to try again or assist you with something else?. interrupted: False [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:03:21 - ivr_bot.supervisor - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.85') = 0.7833333333333333333333333333
2025-10-15 16:03:21 - ivr_bot.supervisor - INFO - [no-session] - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.85') = 0.7833333333333333333333333333
2025-10-15 16:03:21,885 - [32mINFO[0m ivr_bot.supervisor - [supervisor score] relevance=Decimal('0.8') completeness=Decimal('0.7') groundedness=Decimal('0.85') = 0.7833333333333333333333333333 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:39,126 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_iBqq4ReiNki3"}[0m
2025-10-15 16:30:39,129 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:39,130 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:39,367 - [36mDEBUG[0m ivr_bot.main - supervisor score history: [{'relevance': '0.9', 'completeness': '0.85', 'groundedness': '0.9', 'average': '0.8833333333333333'}, {'relevance': '0.8', 'completeness': '0.6', 'groundedness': '0.4', 'average': '0.6'}, {'relevance': '0.75', 'completeness': '0.65', 'groundedness': '0.8', 'average': '0.7333333333333333'}, {'relevance': '0.8', 'completeness': '0.7', 'groundedness': '0.9', 'average': '0.8'}, {'relevance': '0.78', 'completeness': '0.8', 'groundedness': '0.9', 'average': '0.8266666666666667'}, {'relevance': '0.85', 'completeness': '0.7', 'groundedness': '0.9', 'average': '0.8166666666666667'}, {'relevance': '0.85', 'completeness': '0.75', 'groundedness': '1.0', 'average': '0.8666666666666667'}, {'relevance': '0.9', 'completeness': '0.85', 'groundedness': '0.95', 'average': '0.9'}, {'relevance': '0.45', 'completeness': '0.3', 'groundedness': '0.75', 'average': '0.5'}, {'relevance': '0.85', 'completeness': '0.8', 'groundedness': '0.9', 'average': '0.85'}, {'relevance': '1.0', 'completeness': '0.8', 'groundedness': '1.0', 'average': '0.9333333333333333'}, {'relevance': '0.5', 'completeness': '0.4', 'groundedness': '0.5', 'average': '0.4666666666666667'}, {'relevance': '1.0', 'completeness': '1.0', 'groundedness': '1.0', 'average': '1.0'}, {'relevance': '1.0', 'completeness': '1.0', 'groundedness': '1.0', 'average': '1.0'}, {'relevance': '0.9', 'completeness': '0.85', 'groundedness': '0.95', 'average': '0.9'}, {'relevance': '0.67', 'completeness': '0.67', 'groundedness': '1.0', 'average': '0.78'}, {'relevance': '0.7', 'completeness': '0.6', 'groundedness': '0.8', 'average': '0.7'}, {'relevance': '0.85', 'completeness': '0.8', 'groundedness': '0.9', 'average': '0.85'}, {'relevance': '0.8', 'completeness': '0.7', 'groundedness': '0.6', 'average': '0.7'}, {'relevance': '0.8', 'completeness': '0.7', 'groundedness': '0.85', 'average': '0.7833333333333333'}], length: 37 [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:40 - ivr_bot.main - INFO - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Database operation successful: InsertOneResult(ObjectId('68ef85dfa55709e31721915a'), acknowledged=True)
2025-10-15 16:30:40 - ivr_bot.main - INFO - [no-session] - Database operation successful: InsertOneResult(ObjectId('68ef85dfa55709e31721915a'), acknowledged=True)
2025-10-15 16:30:40,038 - [32mINFO[0m ivr_bot.main - Database operation successful: InsertOneResult(ObjectId('68ef85dfa55709e31721915a'), acknowledged=True) [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:40,046 - [36mDEBUG[0m ivr_bot.main - Payload Sent: {'start_time': '2025-10-15 06:53:54', 'end_time': '2025-10-15 07:30:39', 'call_sid': 'chat-a30af3b0-22ea-4c65-b314-106437721fbd', 'cost': 0.19914070000000003, 'conversation_history': [{'speaker': 'Agent', 'transcription': 'I now have your information from Barwood and Regency Taxi  agency. Can I have your phone number please?', 'timestamp': '2025-10-15 15:54:09'}, {'speaker': 'User', 'transcription': '+12345678912', 'timestamp': '2025-10-15 15:56:21'}, {'speaker': 'Agent', 'transcription': 'Thank you for providing your phone number. Let me check your profile details. Please wait a moment.', 'timestamp': '2025-10-15 15:56:36'}, {'speaker': 'Agent', 'transcription': 'I am having some trouble retrieving your profile right now. Could you please tell me your full name, please?', 'timestamp': '2025-10-15 15:56:45'}, {'speaker': 'User', 'transcription': 'waseem ', 'timestamp': '2025-10-15 15:57:48'}, {'speaker': 'Agent', 'transcription': "It's nice to have you here, Waseem. How can I help you today?", 'timestamp': '2025-10-15 15:57:55'}, {'speaker': 'User', 'transcription': 'i want to ride a trip', 'timestamp': '2025-10-15 15:58:04'}, {'speaker': 'Agent', 'transcription': 'Great! Where should I pick you up?', 'timestamp': '2025-10-15 15:58:08'}, {'speaker': 'User', 'transcription': '1 School Dr, Gaithersburg, MD 20878-2809, USA', 'timestamp': '2025-10-15 15:58:27'}, {'speaker': 'Agent', 'transcription': 'I got 1 School Drive, Gaithersburg, MaryLand 20878-2809. Is that correct?', 'timestamp': '2025-10-15 15:58:35'}, {'speaker': 'User', 'transcription': 'yes its correct', 'timestamp': '2025-10-15 15:58:41'}, {'speaker': 'Agent', 'transcription': 'Let me verify that address is valid. Please wait a moment.', 'timestamp': '2025-10-15 15:58:52'}, {'speaker': 'Agent', 'transcription': 'Your address is verified! Where are you headed?', 'timestamp': '2025-10-15 15:58:57'}, {'speaker': 'User', 'transcription': 'Snowfall Rd, Gaithersburg, MD 20879, USA', 'timestamp': '2025-10-15 15:59:10'}, {'speaker': 'Agent', 'transcription': 'I got Snowfall Road, Gaithersburg, MaryLand 20879. Is that correct?', 'timestamp': '2025-10-15 15:59:20'}, {'speaker': 'User', 'transcription': 'yes its correct', 'timestamp': '2025-10-15 15:59:21'}, {'speaker': 'Agent', 'transcription': 'Let me verify that address is valid. Please wait a moment.', 'timestamp': '2025-10-15 15:59:33'}, {'speaker': 'Agent', 'transcription': 'It seems like this address is outside of our service area. Can you please provide another drop-off address?', 'timestamp': '2025-10-15 15:59:53'}, {'speaker': 'User', 'transcription': 'Quince Orchard High School, 15800 Quince Orchard Rd, Gaithersburg, MD 20878', 'timestamp': '2025-10-15 16:00:36'}, {'speaker': 'Agent', 'transcription': 'I got this address Quince Orchard High School, 15800 Quince Orchard Road, Gaithersburg, MaryLand 20878. Do I have that right?', 'timestamp': '2025-10-15 16:00:48'}, {'speaker': 'User', 'transcription': 'yes it correct', 'timestamp': '2025-10-15 16:00:53'}, {'speaker': 'Agent', 'transcription': 'Let me verify that address is valid. Please wait a moment.', 'timestamp': '2025-10-15 16:00:59'}, {'speaker': 'Agent', 'transcription': 'Your address is verified! When would you like your ride to be scheduled?', 'timestamp': '2025-10-15 16:01:14'}, {'speaker': 'User', 'transcription': 'yes to at 4:00 pm', 'timestamp': '2025-10-15 16:01:19'}, {'speaker': 'Agent', 'transcription': 'Just to confirm, you want to schedule your ride for 4:00 pm today, right?', 'timestamp': '2025-10-15 16:01:25'}, {'speaker': 'User', 'transcription': 'yes', 'timestamp': '2025-10-15 16:01:28'}, {'speaker': 'Agent', 'transcription': 'How would you like to pay for your ride?', 'timestamp': '2025-10-15 16:01:38'}, {'speaker': 'User', 'transcription': 'cash', 'timestamp': '2025-10-15 16:01:42'}, {'speaker': 'Agent', 'transcription': 'I got cash. Do I have that right?', 'timestamp': '2025-10-15 16:01:46'}, {'speaker': 'User', 'transcription': 'ues', 'timestamp': '2025-10-15 16:01:49'}, {'speaker': 'Agent', 'transcription': 'Let me get necessary details regarding your payment method! Please wait a moment.', 'timestamp': '2025-10-15 16:01:56'}, {'speaker': 'Agent', 'transcription': 'Your account cash is verified. Do you have any special requirements or additional notes for the driver?', 'timestamp': '2025-10-15 16:02:06'}, {'speaker': 'User', 'transcription': 'no i do not have Additional requirements ', 'timestamp': '2025-10-15 16:02:25'}, {'speaker': 'User', 'transcription': 'yes all is correct', 'timestamp': '2025-10-15 16:02:54'}, {'speaker': 'Agent', 'transcription': 'Let me confirm your trip details:\n- Pick-up: 1 School Drive, Gaithersburg, MaryLand\n- Drop-off: 15800 Quince Orchard Road, Gaithersburg, MaryLand\n- Time: 4:00 pm\n- Payment method: cash\n- There are no special instructions\n\nIs all the information correct for this trip?', 'timestamp': '2025-10-15 16:02:54'}, {'speaker': 'Agent', 'transcription': 'It seems there was an issue with the trip details I submitted. Let me try again to book your ride. Please wait a moment.', 'timestamp': '2025-10-15 16:03:09'}, {'speaker': 'Agent', 'transcription': 'It looks like there is a technical issue with booking your trip right now. I apologize for the inconvenience. Would you like me to try again or assist you with something else?', 'timestamp': '2025-10-15 16:03:20'}]} [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:41 - ivr_bot.main - ERROR - [chat-a30af3b0-22ea-4c65-b314-106437721fbd] - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>

2025-10-15 16:30:41 - ivr_bot.main - ERROR - [no-session] - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>

2025-10-15 16:30:41,235 - [31mERROR[0m ivr_bot.main - Error: 404, <html>
    <head>
        <meta charset="UTF-8">
        <title>Coming Soon: PythonAnywhere</title>
        <style>
            body {
                font-family: Helvetica, Arial, sans-serif;
                width: 500px;
                margin-left: auto;
                margin-right: auto;
                margin-top: 20px;
            }

            h1 {
                font-family: Trebuchet MS, Helvetica, Arial, sans-serif;
            }

            .for-site-owner {
                font-size: smaller;
                margin-top: 30px;
                color: gray;
            }
        </style>
    </head>

    <body>
        <img src="https://s3.amazonaws.com/pythonanywhere-error-images/logo-234x35.png" />

        <div class="main">
            <h1>Coming Soon!</h1>

            <p>
                This is going to be another great website hosted by
                <a href="https://www.pythonanywhere.com/">PythonAnywhere</a>.
            </p>

            <p>
                PythonAnywhere lets you host, run, and code Python in the cloud.
                Our free plan gives you access to machines with
                everything already set up for you. You can develop and host
                your website or any other code directly from your browser
                without having to install software or manage your own server.
            </p>

            <p>
                Need more power? Upgraded plans start at $5/month.
            </p>

            <p>
                <a href="https://www.pythonanywhere.com/">You can find out more about PythonAnywhere here.</a>
            </p>
        </div>

        <div class="for-site-owner">
            <h2>Developer info</h2>

            <p>
                Hi!  If this is your PythonAnywhere-hosted site, then you're
                almost there &mdash; you just need to create
                a web app to handle this domain.
            </p>

            <p>
                Go to the "Web" tab inside
                PythonAnywhere and click "Add a new web app".
                If you already have a web app and you want to use the same code for this domain
                (say because you've just upgraded and want the site
                you built at <code>yourusername.pythonanywhere.com</code> to run on
                <code>www.yourdomain.com</code>) then
                <a href="https://help.pythonanywhere.com/pages/UsingANewDomainForExistingWebApp">this help page should explain
                everything</a>.
            </p>

            <p>
                If you're having problems getting it all working, drop us a line at
                liveusercare@pythonanywhere.com, or in
                <a href="https://www.pythonanywhere.com/forums/">the forums</a>,
                or using the "Send
                feedback" link on the site.  We'll
                get back to you as fast as we can!
            </p>

        </div>

    </body>
</html>
 [90m{"session_id": "no-session", "pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:41,243 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 47316, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:41,257 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 47314, "inference": true}[0m
2025-10-15 16:30:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:30:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:30:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:30:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:30:46,051 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:30:46,060 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:30:46,060 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:30:46,067 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:30:46,068 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_tXmpJNDSTcrL", "agent_name": ""}[0m
2025-10-15 16:30:48,756 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 59257, "inference": true}[0m
2025-10-15 16:30:48,759 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 59259}[0m
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:30:49 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:30:49,917 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 59259, "elapsed_time": 1.16}[0m
2025-10-15 16:30:49,916 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:49,938 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 59257, "inference": true}[0m
VAAPI is supported.
2025-10-15 16:30:52 - ivr_bot.main - INFO - [no-session] - Call SID: chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da
2025-10-15 16:30:52 - ivr_bot.main - INFO - [no-session] - Call SID: chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da
2025-10-15 16:30:52,810 - [32mINFO[0m ivr_bot.main - Call SID: chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:53 - ivr_bot.helper_functions - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Client ID None
2025-10-15 16:30:53 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 16:30:53 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Failed to initialize Agent with increased function call limits
2025-10-15 16:30:53 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 16:30:53,094 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:53 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 16:30:53 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Using pre-configured background audio player for typing sounds
2025-10-15 16:30:53,094 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:53 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 16:30:53,095 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:53 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 16:30:53,095 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:53,101 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:30:58,061 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.122549626001273, "pid": 59257, "inference": true}[0m
2025-10-15 16:30:58,061 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_multilingual", "pid": 59257, "inference": true}[0m
2025-10-15 16:30:59,924 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 59257, "inference": true, "elapsed_time": 11.17}[0m
2025-10-15 16:30:59,924 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_multilingual", "elapsed_time": 1.8626186580004287, "pid": 59257, "inference": true}[0m
2025-10-15 16:30:59,924 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 59257, "inference": true}[0m
2025-10-15 16:30:59,926 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 16:31:00,830 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_we7e4h9LXbto", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 16:31:01,333 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,334 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 16:31:01,334 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Initialized background audio player
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 16:31:01,576 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Started typing sounds for API fetching phase
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 16:31:01,585 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - {}
2025-10-15 16:31:01,615 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - ERROR - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl
2025-10-15 16:31:01,616 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-nQlyl [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.cache_manager - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Cache HIT for affiliate: ids:1:21
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 16:31:01,616 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Using cached affiliate for IDs 1:21
2025-10-15 16:31:01,616 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 16:31:01,616 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,616 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 16:31:01,616 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Widget Flow chatbot Selected
2025-10-15 16:31:01,617 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,617 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,617 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 16:31:01,617 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,617 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:01,618 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:02 - ivr_bot.side_functions - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 16:31:02,716 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:02,717 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:02 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 16:31:02,717 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:10 - ivr_bot.helper_functions - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Client ID -1
2025-10-15 16:31:10 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 16:31:10,204 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:10 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 16:31:10,204 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:10 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 16:31:10,205 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:10,206 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:10,206 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:11 - ivr_bot.side_functions - ERROR - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 16:31:11,281 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:11 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 16:31:11,281 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:11,282 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Building user context information
2025-10-15 16:31:12 - ivr_bot.main - INFO - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - User context built successfully
2025-10-15 16:31:12 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 16:31:12,282 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Invalid phone number format: 
2025-10-15 16:31:12 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 16:31:12 - ivr_bot.main - ERROR - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 16:31:12,282 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Invalid phone number format: 
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 16:31:12,283 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [chat-bc3c3a88-6395-42f8-9c8e-7abc7680d1da] - Invalid phone number format: 
2025-10-15 16:31:12 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 16:31:12,283 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 16:31:12,283 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 16:31:12,283 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:12,283 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 740, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 752, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 757, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:24,054 - [33mWARNING[0m livekit - livekit::rtc_engine:453:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:24,060 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "room disconnected", "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:24,059 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "room disconnected", "user_initiated": false, "pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:24,060 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 59259, "job_id": "AJ_tXmpJNDSTcrL"}[0m
2025-10-15 16:31:24,958 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_we7e4h9LXbto"}[0m
2025-10-15 16:31:24,959 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 59257, "inference": true}[0m
2025-10-15 16:31:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:31:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:31:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:31:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:31:29,672 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:31:29,681 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:31:29,681 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:31:29,688 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:31:33,246 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 59677, "inference": true}[0m
2025-10-15 16:31:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:31:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:31:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:31:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:31:34,365 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 59677, "inference": true}[0m
2025-10-15 16:31:41,258 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 59677, "inference": true, "elapsed_time": 8.01}[0m
2025-10-15 16:31:41,257 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.892364737999742, "pid": 59677, "inference": true}[0m
2025-10-15 16:31:41,258 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 59677, "inference": true}[0m
2025-10-15 16:31:41,260 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 16:31:42,675 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_iN4L87xdDVeE", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 16:32:34,012 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_iN4L87xdDVeE"}[0m
2025-10-15 16:32:34,013 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 59677, "inference": true}[0m
2025-10-15 16:32:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:32:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:32:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:32:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:32:38,403 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:32:38,412 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:32:38,412 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:32:38,418 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:32:40,859 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 59961, "inference": true}[0m
2025-10-15 16:32:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:32:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:32:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:32:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:32:41,855 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 59961, "inference": true}[0m
2025-10-15 16:32:48,397 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.541421408999668, "pid": 59961, "inference": true}[0m
2025-10-15 16:32:48,398 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 59961, "inference": true, "elapsed_time": 7.54}[0m
2025-10-15 16:32:48,397 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 59961, "inference": true}[0m
2025-10-15 16:32:48,400 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 16:32:49,177 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_MpRwebqJQTt6", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 16:37:39,698 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_MpRwebqJQTt6"}[0m
2025-10-15 16:37:39,700 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 59961, "inference": true}[0m
2025-10-15 16:37:46,087 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 16:37:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:37:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:37:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:37:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:37:53,328 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:37:53,338 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:37:53,338 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:37:53,346 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:37:56,189 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 62288, "inference": true}[0m
2025-10-15 16:37:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:37:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:37:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:37:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:37:57,339 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 62288, "inference": true}[0m
2025-10-15 16:38:04,136 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 62288, "inference": true, "elapsed_time": 7.95}[0m
2025-10-15 16:38:04,135 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.796317733000251, "pid": 62288, "inference": true}[0m
2025-10-15 16:38:04,136 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 62288, "inference": true}[0m
2025-10-15 16:38:04,138 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 16:38:04,931 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_3QvrMDFoDBCi", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 16:41:24,784 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_3QvrMDFoDBCi"}[0m
2025-10-15 16:41:24,786 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 62288, "inference": true}[0m
2025-10-15 16:41:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:41:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:41:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:41:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:41:29,741 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:41:29,750 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:41:29,750 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:41:29,756 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:41:32,249 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 63044, "inference": true}[0m
2025-10-15 16:41:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:41:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:41:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:41:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:41:33,174 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 63044, "inference": true}[0m
2025-10-15 16:41:39,631 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 63044, "inference": true, "elapsed_time": 7.38}[0m
2025-10-15 16:41:39,630 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.455706418999398, "pid": 63044, "inference": true}[0m
2025-10-15 16:41:39,631 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 63044, "inference": true}[0m
2025-10-15 16:41:39,633 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 16:41:40,598 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_Z6eX5sZ4Lgdr", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 16:52:34,677 - [33mWARNING[0m watchfiles.main - process already dead, exit code: -9 [90m[0m
2025-10-15 16:52:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:52:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:52:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:52:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:52:40,161 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:52:40,170 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:52:40,170 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:52:40,180 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:52:43,008 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 71311, "inference": true}[0m
2025-10-15 16:52:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:52:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:52:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:52:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:52:43,978 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 71311, "inference": true}[0m
2025-10-15 16:52:51,651 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 71311, "inference": true, "elapsed_time": 8.64}[0m
2025-10-15 16:52:51,650 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.671585389000029, "pid": 71311, "inference": true}[0m
2025-10-15 16:52:51,651 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 71311, "inference": true}[0m
2025-10-15 16:52:51,653 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 16:52:51,655 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 16:52:51,656 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 71311, "inference": true}[0m
Process SpawnProcess-24:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 16:54:08,560 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 16:54:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:54:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:54:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:54:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:54:12,388 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 16:54:12,397 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 16:54:12,397 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 16:54:12,404 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 16:54:14,896 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 72865, "inference": true}[0m
2025-10-15 16:54:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 16:54:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 16:54:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 16:54:15 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 16:54:15,886 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 72865, "inference": true}[0m
2025-10-15 16:54:22,390 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.503820813000857, "pid": 72865, "inference": true}[0m
2025-10-15 16:54:22,390 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 72865, "inference": true, "elapsed_time": 7.49}[0m
2025-10-15 16:54:22,390 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 72865, "inference": true}[0m
2025-10-15 16:54:22,392 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 16:54:22,393 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 16:54:22,394 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 72865, "inference": true}[0m
Process SpawnProcess-25:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 17:15:24,556 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 17:15:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:15:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:15:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:15:29 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:15:29,390 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:15:29,402 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:15:29,402 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:15:29,409 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:15:32,820 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 91757, "inference": true}[0m
2025-10-15 17:15:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:15:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:15:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:15:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:15:34,033 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 91757, "inference": true}[0m
2025-10-15 17:15:45,896 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 91757, "inference": true, "elapsed_time": 13.08}[0m
2025-10-15 17:15:45,893 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 11.860431851000612, "pid": 91757, "inference": true}[0m
2025-10-15 17:15:45,894 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 91757, "inference": true}[0m
2025-10-15 17:15:45,901 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 17:15:45,903 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 17:15:45,905 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 91757, "inference": true}[0m
Process SpawnProcess-26:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 17:16:41,913 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 17:16:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:16:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:16:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:16:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:16:46,883 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:16:46,891 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:16:46,891 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:16:46,898 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:16:49,677 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 93189, "inference": true}[0m
2025-10-15 17:16:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:16:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:16:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:16:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:16:50,710 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 93189, "inference": true}[0m
2025-10-15 17:16:56,452 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 17:17:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:17:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:17:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:17:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:17:00,250 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:17:00,259 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:17:00,259 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:17:00,266 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:17:02,822 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 93389, "inference": true}[0m
2025-10-15 17:17:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:17:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:17:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:17:03 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:17:03,758 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 93389, "inference": true}[0m
2025-10-15 17:17:10,216 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 93389, "inference": true, "elapsed_time": 7.39}[0m
2025-10-15 17:17:10,216 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.457429242000217, "pid": 93389, "inference": true}[0m
2025-10-15 17:17:10,216 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 93389, "inference": true}[0m
2025-10-15 17:17:10,219 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 17:17:11,037 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_zbakPdybq4Rg", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 17:17:11,317 - [32mINFO[0m livekit.agents - received job request [90m{"job_id": "AJ_WMtc5vqmxByZ", "dispatch_id": "", "room_name": "both-21-1-BARWOOD & REGENCY TAXI-exny4", "agent_name": "", "resuming": false}[0m
2025-10-15 17:17:11,484 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 93539}[0m
2025-10-15 17:17:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:17:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:17:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:17:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:17:12,596 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 93539, "elapsed_time": 1.11}[0m
2025-10-15 17:17:12,595 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
VAAPI is supported.
2025-10-15 17:17:16,178 - [32mINFO[0m livekit.agents - received job request [90m{"job_id": "AJ_YS3jWELDz9Em", "dispatch_id": "", "room_name": "both-21-1-BARWOOD & REGENCY TAXI-4appg", "agent_name": "", "resuming": false}[0m
2025-10-15 17:17:16,347 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 93650}[0m
2025-10-15 17:17:17 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:17:17 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:17:17 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:17:17 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:17:17,449 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 93650, "elapsed_time": 1.1}[0m
2025-10-15 17:17:17,449 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:17:20 - ivr_bot.main - INFO - [no-session] - Call SID: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07
2025-10-15 17:17:20 - ivr_bot.main - INFO - [no-session] - Call SID: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07
2025-10-15 17:17:20 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07
2025-10-15 17:17:20,072 - [32mINFO[0m ivr_bot.main - Call SID: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,073 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,073 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,073 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,073 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,073 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07
2025-10-15 17:17:20,073 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Client ID None
2025-10-15 17:17:20 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:17:20 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Failed to initialize Agent with increased function call limits
2025-10-15 17:17:20 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 17:17:20,323 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:17:20,323 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Using pre-configured background audio player for typing sounds
2025-10-15 17:17:20 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 17:17:20,324 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 17:17:20,324 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:20,332 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:34,011 - [33mWARNING[0m livekit - livekit::rtc_engine:453:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume [90m{"pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
2025-10-15 17:17:34,012 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
2025-10-15 17:17:34,011 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
2025-10-15 17:17:34,012 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
2025-10-15 17:17:34,012 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 93539, "job_id": "AJ_WMtc5vqmxByZ"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:17:38,037 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,037 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:17:38,037 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Initialized background audio player
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 17:17:38,348 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Started typing sounds for API fetching phase
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 17:17:38,349 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - {}
2025-10-15 17:17:38,377 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - ERROR - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:17:38 - ivr_bot.cache_manager - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:17:38,377 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Using cached affiliate for IDs 1:21
2025-10-15 17:17:38,378 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:17:38,378 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:17:38 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Widget Flow chatbot Selected
2025-10-15 17:17:38,378 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,378 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 17:17:38,378 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,378 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,378 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,379 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 17:17:38,379 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,379 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:38,379 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:39 - ivr_bot.side_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:17:39,475 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:39,476 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:39 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:17:39,476 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,394 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,394 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,394 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,395 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,395 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,395 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_0b1520b4fd90c3860068ef90e4e1fc819486d47f59bb949869', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085, -80.56370227557687, 40.03477876450898, -76.28661650301018'}), ResponseOutputMessage(id='msg_0b1520b4fd90c3860068ef90e66d80819495f7dad11553555b', content=[ResponseOutputText(annotations=[], text='Roanoke, Guernsey, Fairfield, Kent, Washington, Tazewell ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Client ID -1
2025-10-15 17:17:43,396 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=70, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=503) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:17:43,396 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 70 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,396 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 70 output tokens (gpt-4o) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,396 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 70 output tokens [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,396 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 17:17:43,397 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:17:43,397 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,398 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:43,398 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:44 - ivr_bot.side_functions - ERROR - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:17:44,290 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:44 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:17:44,290 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:44,291 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Building user context information
2025-10-15 17:17:45 - ivr_bot.main - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - User context built successfully
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Invalid phone number format: 
2025-10-15 17:17:45 - ivr_bot.main - ERROR - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:17:45 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 17:17:45,293 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Invalid phone number format: 
2025-10-15 17:17:45 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 17:17:45,293 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Invalid phone number format: 
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:17:45,294 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:17:45,294 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:17:45,295 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:17:45,296 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:17:45,296 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:20:32,602 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:22:07,330 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_id", "arguments": "{}", "speech_id": "speech_63d5b5d691ca", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:22:07 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - get_current_date_and_time function called...
2025-10-15 17:22:07,357 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_current_date_and_time", "arguments": "{}", "speech_id": "speech_63d5b5d691ca", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:22:07 - ivr_bot.helper_functions - INFO - [no-session] - get_current_date_and_time function called...
2025-10-15 17:22:07,358 - [32mINFO[0m ivr_bot.helper_functions - get_current_date_and_time function called... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:22:07,393 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_63d5b5d691ca", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:23:17,656 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:00,795 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_id", "arguments": "{}", "speech_id": "speech_6ff53c2df0f7", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:00 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - get_current_date_and_time function called...
2025-10-15 17:24:00,808 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_current_date_and_time", "arguments": "{}", "speech_id": "speech_6ff53c2df0f7", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:00 - ivr_bot.helper_functions - INFO - [no-session] - get_current_date_and_time function called...
2025-10-15 17:24:00,808 - [32mINFO[0m ivr_bot.helper_functions - get_current_date_and_time function called... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:00,814 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_6ff53c2df0f7", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05,900 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"-1\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 17:24\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_bc24bd4ee8b4", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:24:05,900 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] self.client_id = -1 (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Called collect_trip_payload function at: 2025-10-15 17:24:05.901548
2025-10-15 17:24:05,901 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] payload.client_id = -1 (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:24:05,901 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05,901 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ Using stored client_id collect_main_trip_payload: -1 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05 - ivr_bot.helper_functions - INFO - [no-session] - Called collect_trip_payload function at: 2025-10-15 17:24:05.901548
2025-10-15 17:24:05,901 - [32mINFO[0m ivr_bot.helper_functions - Called collect_trip_payload function at: 2025-10-15 17:24:05.901548 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05,901 - [31mERROR[0m livekit.agents - exception occurred while executing tool
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 1694, in collect_main_trip_payload
    phone_number = self.rider_phone
AttributeError: 'Assistant' object has no attribute 'rider_phone' [90m{"function": "collect_main_trip_payload", "speech_id": "speech_bc24bd4ee8b4", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:05,921 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_bc24bd4ee8b4", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:25,064 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:25,065 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-68883' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33,594 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 17:24\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_2b34051dff92", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:24:33,594 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] self.client_id = -1 (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Called collect_trip_payload function at: 2025-10-15 17:24:33.595815
2025-10-15 17:24:33,595 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] payload.client_id =  (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:24:33,595 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33,595 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ Using stored client_id collect_main_trip_payload: -1 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33 - ivr_bot.helper_functions - INFO - [no-session] - Called collect_trip_payload function at: 2025-10-15 17:24:33.595815
2025-10-15 17:24:33,595 - [32mINFO[0m ivr_bot.helper_functions - Called collect_trip_payload function at: 2025-10-15 17:24:33.595815 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33,596 - [31mERROR[0m livekit.agents - exception occurred while executing tool
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 1694, in collect_main_trip_payload
    phone_number = self.rider_phone
AttributeError: 'Assistant' object has no attribute 'rider_phone' [90m{"function": "collect_main_trip_payload", "speech_id": "speech_2b34051dff92", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:24:33,607 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_2b34051dff92", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:25,222 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:25,222 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-78592' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:27 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Called get_IDs function
2025-10-15 17:25:27,297 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_IDs", "arguments": "{\"params\": {\"account_\": \"cash\", \"payment_method\": \"cash\"}}", "speech_id": "speech_47e143b38145", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:27 - ivr_bot.helper_functions - INFO - [no-session] - Called get_IDs function
2025-10-15 17:25:27,297 - [32mINFO[0m ivr_bot.helper_functions - Called get_IDs function [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:27,297 - [36mDEBUG[0m ivr_bot.helper_functions - Confirmed Account Name: self [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:27,298 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 65} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:27,304 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_id", "arguments": "{}", "speech_id": "speech_47e143b38145", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:28,299 - [36mDEBUG[0m ivr_bot.helper_functions - Prompt sent for matching funding sources: 
            You are given a list of dictionaries enclosed in triple backticks: ```[{'FID': 22, 'FundingSource': 'NIH', 'ProgramID': -1}, {'FID': 132, 'FundingSource': 'WMATAPromo', 'ProgramID': 4}, {'FID': 172, 'FundingSource': 'CHI', 'ProgramID': -1}, {'FID': 176, 'FundingSource': 'WMATA', 'ProgramID': 2}, {'FID': 177, 'FundingSource': 'CSS', 'ProgramID': -1}, {'FID': 180, 'FundingSource': 'CHIW', 'ProgramID': 2}, {'FID': 180, 'FundingSource': 'CHIW', 'ProgramID': 2}, {'FID': 181, 'FundingSource': 'CHI PROMO', 'ProgramID': 4}, {'FID': 184, 'FundingSource': 'FCDSS/Z. Love-01051-613', 'ProgramID': -1}, {'FID': 185, 'FundingSource': 'FCDSS/Z. Love-01051-614', 'ProgramID': -1}, {'FID': 186, 'FundingSource': 'FCDSS/Z. Love-01051-613', 'ProgramID': -1}, {'FID': 1, 'FundingSource': 'Self', 'ProgramID': -1}]```

            Your task is to find the dictionary whose 'FundingSource' value closely matches the account enclosed in double quotes: ``self``. 

            Return the matching dictionary in JSON format with the following fields:

            {
                "FundingSource": "Source Name",
                "FID": FID Value,
                "ProgramID": ProgramID Value
            }

            Instructions:
            1. If a match is found, return the corresponding dictionary in the specified JSON format.
            2. If no match is found, return the following JSON:
                
            {
                "FundingSource": "None",
                "FID": 1,
                "ProgramID": -1
            }

            # Instructions
            ## Make sure the response contains only the JSON output, with nothing else.
            ## Take care of spelling mistakes by STT as well. For example 'Vomata' refers to 'WMATA'.
            ## Do not add backticks or 'json'. I am parsing the response with json.loads(). Make it compatible.
             [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:29,435 - [36mDEBUG[0m ivr_bot.helper_functions - Matching Response: {
    "FundingSource": "Self",
    "FID": 1,
    "ProgramID": -1
} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:29,435 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 65} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,466 - [36mDEBUG[0m ivr_bot.helper_functions - Got Program Id: -1 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,466 - [36mDEBUG[0m ivr_bot.helper_functions - Got Funding Source Id: 1 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,466 - [36mDEBUG[0m ivr_bot.helper_functions - Funding Source List: ['1', '172', '177', '176', '132', '180', '181'] [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,466 - [36mDEBUG[0m ivr_bot.helper_functions - Selected Account Name: Self [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,467 - [36mDEBUG[0m ivr_bot.helper_functions - Got Copay Status: False [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:30,467 - [36mDEBUG[0m ivr_bot.helper_functions - Payload Sent for Payment Type Selection: {'iaffiliateid': '65'} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:31,544 - [36mDEBUG[0m ivr_bot.helper_functions - Prompt sent for matching funding sources: 
                                    You are given a list of dictionaries enclosed in triple backticks: ```[{'PaymentType ID': 13, 'PaymentType Name': 'Airport', 'Affiliate ID': 65}, {'PaymentType ID': 12, 'PaymentType Name': 'WMATA ABILITY RIDE', 'Affiliate ID': 65}, {'PaymentType ID': 11, 'PaymentType Name': 'Regency/Other', 'Affiliate ID': 65}, {'PaymentType ID': 10, 'PaymentType Name': 'NIH-V', 'Affiliate ID': 65}, {'PaymentType ID': 9, 'PaymentType Name': 'Sr Citizen', 'Affiliate ID': 65}, {'PaymentType ID': 8, 'PaymentType Name': 'Corporate-V', 'Affiliate ID': 65}, {'PaymentType ID': 7, 'PaymentType Name': 'Call& R-V', 'Affiliate ID': 65}, {'PaymentType ID': 6, 'PaymentType Name': 'Meditran-V', 'Affiliate ID': 65}, {'PaymentType ID': 5, 'PaymentType Name': 'Other Voucher', 'Affiliate ID': 65}, {'PaymentType ID': 4, 'PaymentType Name': 'CHI Center-V', 'Affiliate ID': 65}, {'PaymentType ID': 3, 'PaymentType Name': 'Token', 'Affiliate ID': 65}, {'PaymentType ID': 2, 'PaymentType Name': 'Credit Card', 'Affiliate ID': 65}, {'PaymentType ID': 1, 'PaymentType Name': 'Cash', 'Affiliate ID': 65}, {'PaymentType ID': 14, 'PaymentType Name': 'Wallet', 'Affiliate ID': 65}]```

                                    Your task is to find the dictionary whose 'PaymentType Name' value closely matches
                                     the account enclosed in double quotes: ``cash``

                                    Return the matching dictionary in JSON format with the following fields:

                                    {
                                        "PaymentType ID": Payment Type ID Value,
                                        "PaymentType Name": "Payment Type Name",
                                        "Affiliate ID": Affiliate ID Value
                                    }

                                    Instructions:
                                    1. If a match is found, return the corresponding dictionary in the specified JSON format.
                                    2. If no match is found, return the following JSON:
                                        
                                    {
                                        "PaymentType ID": 1,
                                        "PaymentType Name": "None",
                                        "Affiliate ID": -1
                                    }

                                    # Instructions
                                    ## Make sure the response contains only the JSON output, with nothing else.
                                    ## Take care of spelling mistakes by STT as well. For example 'Vomata' refers to 'WMATA'.
                                    ## Do not add backticks or 'json'. I am parsing the response with json.loads(). Make it compatible.
                                     [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:32,656 - [36mDEBUG[0m ivr_bot.helper_functions - Matching Response: {
    "PaymentType ID": 1,
    "PaymentType Name": "Cash",
    "Affiliate ID": 65
} [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:32 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1
2025-10-15 17:25:32 - ivr_bot.helper_functions - INFO - [no-session] - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1
2025-10-15 17:25:32,657 - [32mINFO[0m ivr_bot.helper_functions - Verified Account Name is: Self, Funding Source Id is: 1, Requires Rider Verification Status: False, Payment Type Id is: 1, Require Copay Status is: False, Program Id is -1 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:32,659 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_47e143b38145", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:33,543 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:33,543 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:33,545 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/plugins/deepgram/tts.py", line 322, in _run_segments
    async for word in word_stream:
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/tokenize/token_stream.py", line 110, in __anext__
    return await self._event_ch.__anext__()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/channel.py", line 176, in __anext__
    return await self.recv()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/channel.py", line 106, in recv
    await g
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36 - ivr_bot.helper_functions - WARNING - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:25:36,966 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"-1\",\"funding_source_id\":\"1\",\"rider_name\":\"waseem\",\"payment_type_id\":\"1\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 17:24\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"+12345678912\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_55e6e96c1148", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - Called collect_trip_payload function at: 2025-10-15 17:25:36.967467
2025-10-15 17:25:36,966 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] self.client_id = -1 (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36,967 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ [MAIN TRIP DEBUG] payload.client_id = -1 (type: <class 'str'>) [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it...
2025-10-15 17:25:36,967 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available in collect_main_trip_payload, attempting to retrieve it... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36,967 - [36mDEBUG[0m ivr_bot.helper_functions - ✅ Using stored client_id collect_main_trip_payload: -1 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36 - ivr_bot.helper_functions - INFO - [no-session] - Called collect_trip_payload function at: 2025-10-15 17:25:36.967467
2025-10-15 17:25:36,967 - [32mINFO[0m ivr_bot.helper_functions - Called collect_trip_payload function at: 2025-10-15 17:25:36.967467 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36,967 - [31mERROR[0m livekit.agents - exception occurred while executing tool
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 1694, in collect_main_trip_payload
    phone_number = self.rider_phone
AttributeError: 'Assistant' object has no attribute 'rider_phone' [90m{"function": "collect_main_trip_payload", "speech_id": "speech_55e6e96c1148", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:36,971 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_55e6e96c1148", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - transfer_call_voice function called...
2025-10-15 17:25:39,430 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "transfer_call", "arguments": "{}", "speech_id": "speech_59d390837ab8", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - transfer sip: sip:5000@139.64.158.216
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [no-session] - transfer_call_voice function called...
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - participant_identity: BARWOOD & REGENCY TAXI
2025-10-15 17:25:39,431 - [32mINFO[0m ivr_bot.helper_functions - transfer_call_voice function called... [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [no-session] - transfer sip: sip:5000@139.64.158.216
2025-10-15 17:25:39,431 - [32mINFO[0m ivr_bot.helper_functions - transfer sip: sip:5000@139.64.158.216 [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:39 - ivr_bot.helper_functions - INFO - [no-session] - participant_identity: BARWOOD & REGENCY TAXI
2025-10-15 17:25:39,431 - [32mINFO[0m ivr_bot.helper_functions - participant_identity: BARWOOD & REGENCY TAXI [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:39,432 - [36mDEBUG[0m ivr_bot.helper_functions - Transfer request: participant_identity: "BARWOOD & REGENCY TAXI"
room_name: "both-21-1-BARWOOD & REGENCY TAXI-4appg"
transfer_to: "sip:5000@139.64.158.216"
 [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:40 - ivr_bot.helper_functions - INFO - [chat-1de1b9d5-c8a0-4b5a-a1c2-e4aa71f72b07] - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 17:25:40 - ivr_bot.helper_functions - INFO - [no-session] - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 17:25:40,026 - [32mINFO[0m ivr_bot.helper_functions - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400) [90m{"session_id": "no-session", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:25:40,026 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_59d390837ab8", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:11,137 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_zbakPdybq4Rg"}[0m
2025-10-15 17:28:11,139 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:11,139 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:11,324 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 93650, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:11,353 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 93389, "inference": true}[0m
2025-10-15 17:28:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:16,898 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:28:16,909 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:28:16,909 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:28:16,915 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:28:16,917 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:28:20,162 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 103104, "inference": true}[0m
2025-10-15 17:28:20,166 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 103106}[0m
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:21,570 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 103106, "elapsed_time": 1.4}[0m
2025-10-15 17:28:21,570 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:28:21,602 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 103104, "inference": true}[0m
2025-10-15 17:28:23 - ivr_bot.main - INFO - [no-session] - Call SID: chat-f681a34f-85fc-4300-8bd2-21338f11ff09
2025-10-15 17:28:23 - ivr_bot.main - INFO - [no-session] - Call SID: chat-f681a34f-85fc-4300-8bd2-21338f11ff09
2025-10-15 17:28:23,202 - [32mINFO[0m ivr_bot.main - Call SID: chat-f681a34f-85fc-4300-8bd2-21338f11ff09 [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-f681a34f-85fc-4300-8bd2-21338f11ff09
2025-10-15 17:28:23,203 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-f681a34f-85fc-4300-8bd2-21338f11ff09 [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23,203 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23,203 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-f681a34f-85fc-4300-8bd2-21338f11ff09 [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23,203 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23,203 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-f681a34f-85fc-4300-8bd2-21338f11ff09 [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-f681a34f-85fc-4300-8bd2-21338f11ff09
2025-10-15 17:28:23,203 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-f681a34f-85fc-4300-8bd2-21338f11ff09 [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.helper_functions - INFO - [chat-f681a34f-85fc-4300-8bd2-21338f11ff09] - Client ID None
2025-10-15 17:28:23 - ivr_bot.helper_functions - WARNING - [chat-f681a34f-85fc-4300-8bd2-21338f11ff09] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:28:23 - ivr_bot.helper_functions - WARNING - [chat-f681a34f-85fc-4300-8bd2-21338f11ff09] - Failed to initialize Agent with increased function call limits
2025-10-15 17:28:23 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 17:28:23,501 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.main - INFO - [chat-f681a34f-85fc-4300-8bd2-21338f11ff09] - Using pre-configured background audio player for typing sounds
2025-10-15 17:28:23 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:28:23,502 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 17:28:23,502 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 17:28:23,503 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:23,512 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 103106, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:28:33,073 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 11.470492060001561, "pid": 103104, "inference": true}[0m
2025-10-15 17:28:33,074 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 103104, "inference": true}[0m
2025-10-15 17:28:33,402 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process inference_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/inference_proc_lazy_main.py", line 61, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 17:28:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:40,331 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:28:40,344 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:28:40,345 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:28:40,356 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:28:40,357 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:28:42,398 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:49,084 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:28:49,111 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:28:49,111 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:28:49,135 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:28:49,137 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:28:52,496 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:28:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:28:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:28:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:28:57,547 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:28:57,558 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:28:57,558 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:28:57,566 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:28:57,568 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:29:01,132 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 103858}[0m
2025-10-15 17:29:01,135 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 103860, "inference": true}[0m
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:29:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:29:02,356 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 103860, "inference": true}[0m
2025-10-15 17:29:02,395 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 103858, "elapsed_time": 1.26}[0m
2025-10-15 17:29:02,395 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:29:04 - ivr_bot.main - INFO - [no-session] - Call SID: chat-2601867f-d5fe-48e9-a951-c5434541b5d9
2025-10-15 17:29:04 - ivr_bot.main - INFO - [no-session] - Call SID: chat-2601867f-d5fe-48e9-a951-c5434541b5d9
2025-10-15 17:29:04,042 - [32mINFO[0m ivr_bot.main - Call SID: chat-2601867f-d5fe-48e9-a951-c5434541b5d9 [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-2601867f-d5fe-48e9-a951-c5434541b5d9
2025-10-15 17:29:04,043 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-2601867f-d5fe-48e9-a951-c5434541b5d9 [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04,043 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04,044 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-2601867f-d5fe-48e9-a951-c5434541b5d9 [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04,044 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04,044 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-2601867f-d5fe-48e9-a951-c5434541b5d9 [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-2601867f-d5fe-48e9-a951-c5434541b5d9
2025-10-15 17:29:04,044 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-2601867f-d5fe-48e9-a951-c5434541b5d9 [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.helper_functions - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Client ID None
2025-10-15 17:29:04 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:29:04 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Failed to initialize Agent with increased function call limits
2025-10-15 17:29:04 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 17:29:04,444 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:29:04 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Using pre-configured background audio player for typing sounds
2025-10-15 17:29:04,445 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 17:29:04,445 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 17:29:04,446 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:04,455 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:10 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:29:10 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:29:10 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:29:10,625 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:10,626 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:10 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:29:10,626 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:10 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Initialized background audio player
2025-10-15 17:29:10 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Started typing sounds for API fetching phase
2025-10-15 17:29:10 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 17:29:10,964 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:10 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 17:29:10,965 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:29:11,020 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - {}
2025-10-15 17:29:11 - ivr_bot.main - ERROR - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:29:11 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:29:11,021 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.cache_manager - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:29:11 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 17:29:11,021 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Using cached affiliate for IDs 1:21
2025-10-15 17:29:11 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:29:11,022 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Widget Flow chatbot Selected
2025-10-15 17:29:11 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:29:11,022 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,023 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 17:29:11,023 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,023 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,023 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,023 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 17:29:11,024 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,025 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:11,025 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:12 - ivr_bot.side_functions - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:29:12,115 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:12,115 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:12 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:29:12,116 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:13,479 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 103860, "inference": true, "elapsed_time": 12.34}[0m
2025-10-15 17:29:13,479 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 11.122872145999281, "pid": 103860, "inference": true}[0m
2025-10-15 17:29:13,479 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 103860, "inference": true}[0m
2025-10-15 17:29:13,482 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 17:29:14,238 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_62Hz7z723SHG", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 17:29:16,885 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,885 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,886 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,886 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,886 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,886 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_0493e796068981410068ef939958ec81938a0faabd1bfe2386', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085,-80.56370227557687 and 40.03477876450898,-76.28661650301018'}), ResponseOutputMessage(id='msg_0493e796068981410068ef939bb8e08193842b8fa59d8f14ca', content=[ResponseOutputText(annotations=[], text='Montgomery, Roanoke, Botetourt, Rockbridge, Augusta, Rockingham, Shenandoah, Frederick, Clarke, Loudoun ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16 - ivr_bot.helper_functions - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Client ID -1
2025-10-15 17:29:16,887 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=79, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=512) [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,887 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 79 [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:29:16,887 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 79 output tokens (gpt-4o) [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,887 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 79 output tokens [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,887 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 17:29:16,887 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:29:16,888 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,888 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:16,888 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:17 - ivr_bot.side_functions - ERROR - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:29:17,786 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:17 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:29:17,786 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:17,787 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Building user context information
2025-10-15 17:29:18 - ivr_bot.main - INFO - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - User context built successfully
2025-10-15 17:29:18 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 17:29:18,788 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Invalid phone number format: 
2025-10-15 17:29:18 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 17:29:18,788 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.main - ERROR - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Invalid phone number format: 
2025-10-15 17:29:18,789 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [chat-2601867f-d5fe-48e9-a951-c5434541b5d9] - Invalid phone number format: 
2025-10-15 17:29:18 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:29:18,789 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:29:18,789 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:29:18,790 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:18,790 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:38,217 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_62Hz7z723SHG"}[0m
2025-10-15 17:29:38,220 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:38,219 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:38,445 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 103858, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:38,517 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 103860, "inference": true}[0m
2025-10-15 17:29:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:29:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:29:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:29:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:29:43,932 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:29:43,941 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:29:43,941 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:29:43,949 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:29:43,950 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:29:46,864 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 104801, "inference": true}[0m
2025-10-15 17:29:46,867 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 104803}[0m
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:29:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:29:48,290 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 104801, "inference": true}[0m
2025-10-15 17:29:48,312 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 104803, "elapsed_time": 1.44}[0m
2025-10-15 17:29:48,312 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:29:51 - ivr_bot.main - INFO - [no-session] - Call SID: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53
2025-10-15 17:29:51 - ivr_bot.main - INFO - [no-session] - Call SID: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53
2025-10-15 17:29:51,141 - [32mINFO[0m ivr_bot.main - Call SID: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53 [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51,142 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53 [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53
2025-10-15 17:29:51,143 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51,143 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53 [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51,143 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51,143 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53 [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53
2025-10-15 17:29:51,143 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-2e82f67b-75c6-4814-9d7b-d46a412abf53 [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.helper_functions - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Client ID None
2025-10-15 17:29:51 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:29:51 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Failed to initialize Agent with increased function call limits
2025-10-15 17:29:51 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 17:29:51,471 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 17:29:51,471 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Using pre-configured background audio player for typing sounds
2025-10-15 17:29:51 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 17:29:51,471 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 17:29:51,472 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:51,481 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:29:56,695 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.404937418003101, "pid": 104801, "inference": true}[0m
2025-10-15 17:29:56,696 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 104801, "inference": true, "elapsed_time": 9.83}[0m
2025-10-15 17:29:56,695 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 104801, "inference": true}[0m
2025-10-15 17:29:56,698 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 17:29:57,621 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_Jyrs8ncM2QGy", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 17:30:03,011 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,012 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 17:30:03,012 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Initialized background audio player
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 17:30:03,325 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Started typing sounds for API fetching phase
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 17:30:03,326 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - {}
2025-10-15 17:30:03,352 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg
2025-10-15 17:30:03 - ivr_bot.main - ERROR - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:30:03,352 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-4appg [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.cache_manager - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 17:30:03,352 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Using cached affiliate for IDs 1:21
2025-10-15 17:30:03 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 17:30:03,352 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 17:30:03,352 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Widget Flow chatbot Selected
2025-10-15 17:30:03,353 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 17:30:03,353 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,353 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,353 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,353 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 17:30:03,353 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,354 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:03,354 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:04 - ivr_bot.side_functions - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:30:04,343 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:04,343 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:04 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 17:30:04,343 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,352 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10 - ivr_bot.helper_functions - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Client ID -1
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_00929856452e342b0068ef93cd3d2881979c196c1a9f183df1', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085,-80.56370227557687 and 40.03477876450898,-76.28661650301018'}), ResponseOutputMessage(id='msg_00929856452e342b0068ef93d0595c819789ab856517648cbf', content=[ResponseOutputText(annotations=[], text='Roanoke, Montgomery, Botetourt, Bedford, Franklin, Craig, Floyd, Pulaski, Giles, Alleghany ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=76, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=509) [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,353 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 76 [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,354 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 76 output tokens (gpt-4o) [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,354 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 76 output tokens [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,354 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 17:30:10,354 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 17:30:10,354 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,355 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:10,355 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:11 - ivr_bot.side_functions - ERROR - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:30:11,433 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:11 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 17:30:11,434 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:11,434 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Building user context information
2025-10-15 17:30:12 - ivr_bot.main - INFO - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - User context built successfully
2025-10-15 17:30:12 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 17:30:12,436 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Invalid phone number format: 
2025-10-15 17:30:12 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 17:30:12,437 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.main - ERROR - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Invalid phone number format: 
2025-10-15 17:30:12,439 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [chat-2e82f67b-75c6-4814-9d7b-d46a412abf53] - Invalid phone number format: 
2025-10-15 17:30:12 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 17:30:12,439 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:30:12,440 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 17:30:12,440 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:30:12,440 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 57, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 88, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:31:47,126 - [31mERROR[0m livekit.agents - process exited with non-zero exit code 255 [90m{"pid": 104803, "job_id": "AJ_YS3jWELDz9Em"}[0m
2025-10-15 17:31:47,152 - [31mERROR[0m livekit.agents - process exited with non-zero exit code 255 [90m{"pid": 104801, "inference": true}[0m
2025-10-15 17:44:52,488 - [33mWARNING[0m watchfiles.main - process already dead, exit code: -9 [90m[0m
2025-10-15 17:44:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:44:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:44:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:44:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:44:56,455 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:44:56,464 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:44:56,464 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:44:56,471 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:44:56,473 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:44:59,155 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 118858, "inference": true}[0m
2025-10-15 17:44:59,158 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 118860}[0m
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:00 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:00,404 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 118860, "elapsed_time": 1.25}[0m
2025-10-15 17:45:00,404 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 118860, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:45:00,438 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 118858, "inference": true}[0m
2025-10-15 17:45:07,983 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 17:45:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:12,185 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:45:12,196 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:45:12,196 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:45:12,203 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:45:12,204 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:45:15,187 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 119131, "inference": true}[0m
2025-10-15 17:45:15,190 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 119133}[0m
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:16,497 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 119133, "elapsed_time": 1.31}[0m
2025-10-15 17:45:16,497 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 119133, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:45:16,521 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 119131, "inference": true}[0m
2025-10-15 17:45:26,623 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 10.101877384000545, "pid": 119131, "inference": true}[0m
2025-10-15 17:45:26,624 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 119131, "inference": true}[0m
2025-10-15 17:45:27,441 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process inference_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/inference_proc_lazy_main.py", line 61, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 17:45:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:33 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:33,647 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:45:33,669 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:45:33,669 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:45:33,687 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:45:33,689 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:45:37,391 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 119584}[0m
2025-10-15 17:45:37,394 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 119586, "inference": true}[0m
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:45:38 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:45:38,854 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 119584, "elapsed_time": 1.46}[0m
2025-10-15 17:45:38,854 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 119584, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:45:38,862 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 119586, "inference": true}[0m
2025-10-15 17:45:46,825 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 119586, "inference": true, "elapsed_time": 9.43}[0m
2025-10-15 17:45:46,824 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.962159145998157, "pid": 119586, "inference": true}[0m
2025-10-15 17:45:46,825 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 119586, "inference": true}[0m
2025-10-15 17:45:46,826 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 17:45:46,828 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 17:45:46,828 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 119586, "inference": true}[0m
Process SpawnProcess-36:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 317, in _bootstrap
    util._exit_function()
  File "/usr/lib/python3.10/multiprocessing/util.py", line 357, in _exit_function
    p.join()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 149, in join
    res = self._popen.wait(timeout)
  File "/usr/lib/python3.10/multiprocessing/popen_fork.py", line 43, in wait
    return self.poll(os.WNOHANG if timeout == 0.0 else 0)
  File "/usr/lib/python3.10/multiprocessing/popen_forkserver.py", line 65, in poll
    if not wait([self.sentinel], timeout):
  File "/usr/lib/python3.10/multiprocessing/connection.py", line 931, in wait
    ready = selector.select(timeout)
  File "/usr/lib/python3.10/selectors.py", line 416, in select
    fd_event_list = self._selector.poll(timeout)
KeyboardInterrupt
2025-10-15 17:46:14,166 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 17:46:18 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:46:18 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:46:18 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:46:18 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:46:18,399 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 17:46:18,408 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 17:46:18,408 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 17:46:18,416 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 17:46:18,417 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_YS3jWELDz9Em", "agent_name": ""}[0m
2025-10-15 17:46:21,116 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 120284, "inference": true}[0m
2025-10-15 17:46:21,119 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 120286}[0m
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 17:46:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 17:46:22,429 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 120286, "elapsed_time": 1.31}[0m
2025-10-15 17:46:22,429 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 120286, "job_id": "AJ_YS3jWELDz9Em"}[0m
VAAPI is supported.
2025-10-15 17:46:22,452 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 120284, "inference": true}[0m
2025-10-15 17:46:30,462 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 120284, "inference": true, "elapsed_time": 9.35}[0m
2025-10-15 17:46:30,461 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.008715627998754, "pid": 120284, "inference": true}[0m
2025-10-15 17:46:30,462 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 120284, "inference": true}[0m
2025-10-15 17:46:30,464 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 17:46:30,465 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 17:46:30,466 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 120284, "inference": true}[0m
worker process is not responding.. worker crashed?
Process SpawnProcess-37:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:04:52,466 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:04:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:04:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:04:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:04:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:04:58,037 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:04:58,051 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:04:58,051 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:04:58,060 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:05:00,688 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 137245, "inference": true}[0m
2025-10-15 18:05:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:05:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:05:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:05:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:05:01,638 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 137245, "inference": true}[0m
2025-10-15 18:05:08,265 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 137245, "inference": true, "elapsed_time": 7.58}[0m
2025-10-15 18:05:08,264 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.626191809002194, "pid": 137245, "inference": true}[0m
2025-10-15 18:05:08,264 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 137245, "inference": true}[0m
2025-10-15 18:05:08,267 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 18:05:08,269 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:05:08,270 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 137245, "inference": true}[0m
Process SpawnProcess-38:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:05:16,134 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:05:19 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:05:19 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:05:19 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:05:19 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:05:20,093 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:05:20,103 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:05:20,103 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:05:20,111 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:05:22,776 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 137532, "inference": true}[0m
2025-10-15 18:05:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:05:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:05:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:05:23 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:05:23,797 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 137532, "inference": true}[0m
2025-10-15 18:05:31,192 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 137532, "inference": true, "elapsed_time": 8.42}[0m
2025-10-15 18:05:31,192 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.394844471000397, "pid": 137532, "inference": true}[0m
2025-10-15 18:05:31,192 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 137532, "inference": true}[0m
2025-10-15 18:05:31,194 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 18:05:31,195 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:05:31,196 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 137532, "inference": true}[0m
Process SpawnProcess-39:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:07:13,040 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:07:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:07:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:07:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:07:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:07:17,107 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:07:17,117 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:07:17,117 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:07:17,124 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:07:19,705 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 139157, "inference": true}[0m
2025-10-15 18:07:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:07:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:07:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:07:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:07:20,702 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 139157, "inference": true}[0m
2025-10-15 18:07:27,691 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 139157, "inference": true, "elapsed_time": 7.99}[0m
2025-10-15 18:07:27,691 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.988491363998037, "pid": 139157, "inference": true}[0m
2025-10-15 18:07:27,693 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 18:07:27,691 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 139157, "inference": true}[0m
2025-10-15 18:07:27,694 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:07:27,695 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 139157, "inference": true}[0m
Process SpawnProcess-40:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:08:09,081 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:08:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:08:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:08:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:08:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:08:12,759 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:08:12,771 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:08:12,771 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:08:12,778 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:08:15,357 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 140231, "inference": true}[0m
2025-10-15 18:08:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:08:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:08:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:08:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:08:16,446 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 140231, "inference": true}[0m
2025-10-15 18:08:22,901 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 140231, "inference": true, "elapsed_time": 7.54}[0m
2025-10-15 18:08:22,900 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.45442188800007, "pid": 140231, "inference": true}[0m
2025-10-15 18:08:22,901 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 140231, "inference": true}[0m
2025-10-15 18:08:22,902 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 18:08:22,904 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:08:22,904 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 140231, "inference": true}[0m
Process SpawnProcess-41:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:10:51,342 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:10:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:10:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:10:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:10:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:10:57,707 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:11:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:11:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:11:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:11:01 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:11:01,681 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:11:01,696 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:11:01,696 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:11:01,708 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:11:04,473 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 142500, "inference": true}[0m
2025-10-15 18:11:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:11:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:11:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:11:05 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:11:05,633 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 142500, "inference": true}[0m
2025-10-15 18:11:13,550 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 142500, "inference": true, "elapsed_time": 9.08}[0m
2025-10-15 18:11:13,549 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.916118482000456, "pid": 142500, "inference": true}[0m
2025-10-15 18:11:13,550 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 142500, "inference": true}[0m
2025-10-15 18:11:13,553 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:11:14,428 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_EJP6X3mntbk4", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:11:40,264 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_EJP6X3mntbk4"}[0m
2025-10-15 18:11:40,267 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 142500, "inference": true}[0m
2025-10-15 18:11:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:11:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:11:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:11:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:11:44,696 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:11:44,705 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:11:44,705 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:11:44,712 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:11:47,240 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 143240, "inference": true}[0m
2025-10-15 18:11:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:11:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:11:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:11:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:11:48,250 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 143240, "inference": true}[0m
2025-10-15 18:11:54,679 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 143240, "inference": true, "elapsed_time": 7.44}[0m
2025-10-15 18:11:54,678 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.428283155000827, "pid": 143240, "inference": true}[0m
2025-10-15 18:11:54,681 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:11:54,679 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 143240, "inference": true}[0m
2025-10-15 18:11:55,506 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_bJNoYDBYmv6L", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:13:47,377 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_bJNoYDBYmv6L"}[0m
2025-10-15 18:13:47,378 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 143240, "inference": true}[0m
2025-10-15 18:13:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:13:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:13:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:13:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:13:53,381 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:13:53,393 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:13:53,393 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:13:53,403 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:13:56,191 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 145026, "inference": true}[0m
2025-10-15 18:13:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:13:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:13:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:13:57 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:13:57,469 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 145026, "inference": true}[0m
2025-10-15 18:14:03,615 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:14:08 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:08 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:08 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:08 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:08,885 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:14:08,897 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:14:08,897 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:14:08,905 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:14:12,398 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 145313, "inference": true}[0m
2025-10-15 18:14:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:13,811 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 145313, "inference": true}[0m
2025-10-15 18:14:19,672 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:14:25 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:25 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:25 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:25 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:25,689 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:14:25,713 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:14:25,713 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:14:25,733 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:14:29,205 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:14:30 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:30 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:30 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:30 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:34,261 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:14:34,272 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:14:34,272 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:14:34,279 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:14:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:41,909 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:14:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:46,369 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:14:46,380 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:14:46,380 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:14:46,387 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:14:49,699 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 146093, "inference": true}[0m
2025-10-15 18:14:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:14:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:14:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:14:50 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:14:50,918 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 146093, "inference": true}[0m
2025-10-15 18:14:59,257 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 146093, "inference": true, "elapsed_time": 9.56}[0m
2025-10-15 18:14:59,257 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.338665100000071, "pid": 146093, "inference": true}[0m
2025-10-15 18:14:59,257 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 146093, "inference": true}[0m
2025-10-15 18:14:59,259 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:15:00,194 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_moLmH4gFiqo9", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:15:00,214 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_moLmH4gFiqo9"}[0m
2025-10-15 18:15:00,216 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 146093, "inference": true}[0m
2025-10-15 18:15:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:15:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:15:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:15:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:15:06,596 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:15:06,613 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:15:06,613 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:15:06,628 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:15:11,154 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 146448, "inference": true}[0m
2025-10-15 18:15:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:15:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:15:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:15:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:15:12,896 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 146448, "inference": true}[0m
2025-10-15 18:15:22,471 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 146448, "inference": true, "elapsed_time": 11.32}[0m
2025-10-15 18:15:22,470 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 9.573742967000726, "pid": 146448, "inference": true}[0m
2025-10-15 18:15:22,471 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 146448, "inference": true}[0m
2025-10-15 18:15:22,473 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:15:23,502 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_LitRx9ezcHHG", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:16:22,446 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_LitRx9ezcHHG"}[0m
2025-10-15 18:16:22,447 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 146448, "inference": true}[0m
2025-10-15 18:16:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:28,720 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:16:28,732 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:16:28,732 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:16:28,739 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:16:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:34,721 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:16:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:40 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:40,446 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:16:40,474 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:16:40,475 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:16:40,494 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:16:42,953 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 18:16:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:45 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:48,164 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:16:48,177 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:16:48,177 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:16:48,186 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:16:51,680 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 147944, "inference": true}[0m
2025-10-15 18:16:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:16:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:16:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:16:53 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:16:53,264 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 147944, "inference": true}[0m
2025-10-15 18:17:03,419 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 10.154863867999666, "pid": 147944, "inference": true}[0m
2025-10-15 18:17:03,420 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 147944, "inference": true}[0m
2025-10-15 18:17:04,725 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process inference_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/inference_proc_lazy_main.py", line 61, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 18:17:09 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:17:09 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:17:09 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:17:09 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:17:10,071 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:17:10,084 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:17:10,084 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:17:10,094 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:17:13,347 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 148325, "inference": true}[0m
2025-10-15 18:17:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:17:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:17:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:17:14 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:17:14,846 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 148325, "inference": true}[0m
2025-10-15 18:17:25,471 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 148325, "inference": true, "elapsed_time": 12.12}[0m
2025-10-15 18:17:25,470 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 10.624548478001088, "pid": 148325, "inference": true}[0m
2025-10-15 18:17:25,471 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 148325, "inference": true}[0m
2025-10-15 18:17:25,475 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:17:26,499 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_WEgLdYFFvxFD", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:17:35,111 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_WEgLdYFFvxFD"}[0m
2025-10-15 18:17:35,112 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 148325, "inference": true}[0m
2025-10-15 18:17:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:17:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:17:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:17:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:17:39,667 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:17:39,676 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:17:39,676 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:17:39,682 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:17:42,538 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 148809, "inference": true}[0m
2025-10-15 18:17:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:17:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:17:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:17:43 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:17:43,522 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 148809, "inference": true}[0m
2025-10-15 18:17:49,779 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 148809, "inference": true, "elapsed_time": 7.24}[0m
2025-10-15 18:17:49,778 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.256176843999128, "pid": 148809, "inference": true}[0m
2025-10-15 18:17:49,779 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 148809, "inference": true}[0m
2025-10-15 18:17:49,781 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:17:50,664 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_9sDtGkD2YUS4", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:21:17,726 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_9sDtGkD2YUS4"}[0m
2025-10-15 18:21:17,728 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 148809, "inference": true}[0m
2025-10-15 18:21:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:21:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:21:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:21:22 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:21:22,615 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:21:22,624 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:21:22,625 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:21:22,631 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:21:25,150 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 151548, "inference": true}[0m
2025-10-15 18:21:26 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:21:26 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:21:26 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:21:26 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:21:26,142 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 151548, "inference": true}[0m
2025-10-15 18:21:32,944 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 151548, "inference": true, "elapsed_time": 7.79}[0m
2025-10-15 18:21:32,944 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.801118102001055, "pid": 151548, "inference": true}[0m
2025-10-15 18:21:32,944 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 151548, "inference": true}[0m
2025-10-15 18:21:32,946 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:21:33,757 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_Za3oJx9Vb7n3", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:22:12,424 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_Za3oJx9Vb7n3"}[0m
2025-10-15 18:22:12,426 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 151548, "inference": true}[0m
2025-10-15 18:22:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:22:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:22:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:22:16 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:22:17,017 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:22:17,026 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:22:17,026 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:22:17,032 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:22:19,630 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 152468, "inference": true}[0m
2025-10-15 18:22:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:22:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:22:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:22:20 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:22:20,643 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 152468, "inference": true}[0m
2025-10-15 18:22:27,020 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 152468, "inference": true, "elapsed_time": 7.39}[0m
2025-10-15 18:22:27,020 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.376374251001835, "pid": 152468, "inference": true}[0m
2025-10-15 18:22:27,020 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 152468, "inference": true}[0m
2025-10-15 18:22:27,022 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:22:28,065 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_kCKfSji54xnt", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:27:27,722 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_kCKfSji54xnt"}[0m
2025-10-15 18:27:27,725 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 152468, "inference": true}[0m
2025-10-15 18:27:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:27:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:27:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:27:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:27:33,246 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:27:33,257 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:27:33,257 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:27:33,265 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:27:35,932 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 156419, "inference": true}[0m
2025-10-15 18:27:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:27:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:27:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:27:36 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:27:36,935 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 156419, "inference": true}[0m
2025-10-15 18:27:43,902 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 156419, "inference": true, "elapsed_time": 7.97}[0m
2025-10-15 18:27:43,902 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.966539049997664, "pid": 156419, "inference": true}[0m
2025-10-15 18:27:43,902 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 156419, "inference": true}[0m
2025-10-15 18:27:43,904 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:27:44,784 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_z4E2hoYm323t", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 18:27:45,856 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_z4E2hoYm323t"}[0m
2025-10-15 18:27:45,858 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 156419, "inference": true}[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:27:57,616 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:28:27,516 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:29:00,531 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:29:54,552 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:30:21,560 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:30:53,226 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:31:25,103 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:33:37,299 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:34:03,550 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:34:20,619 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:35:04,726 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:38:15,074 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:38:24,618 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:39:01,208 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:39:24,994 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:39:42,858 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 22, in <module>
    from models import (
ImportError: cannot import name 'NEMTTripPayload' from 'models' (/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/models.py)
2025-10-15 18:41:02,101 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:41:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:41:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:41:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:41:06 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:41:07,131 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:41:07,140 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:41:07,140 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:41:07,147 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:41:10,915 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 166806, "inference": true}[0m
2025-10-15 18:41:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:41:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:41:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:41:12 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:41:12,358 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 166806, "inference": true}[0m
2025-10-15 18:41:29,815 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 166806, "inference": true, "elapsed_time": 18.9}[0m
2025-10-15 18:41:29,814 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 17.455884571998467, "pid": 166806, "inference": true}[0m
2025-10-15 18:41:29,815 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 166806, "inference": true}[0m
2025-10-15 18:41:29,822 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 11000): address already in use
2025-10-15 18:41:29,834 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:41:29,837 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 166806, "inference": true}[0m
Process SpawnProcess-76:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:41:58,132 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:42:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:42:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:42:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:42:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:42:02,775 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:42:02,790 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:42:02,790 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:42:02,802 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:42:06,438 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 168002, "inference": true}[0m
2025-10-15 18:42:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:42:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:42:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:42:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:42:07,729 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 168002, "inference": true}[0m
2025-10-15 18:42:16,236 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 168002, "inference": true, "elapsed_time": 9.8}[0m
2025-10-15 18:42:16,236 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.50706622099824, "pid": 168002, "inference": true}[0m
2025-10-15 18:42:16,236 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 168002, "inference": true}[0m
2025-10-15 18:42:16,238 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 18:42:16,240 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:42:16,241 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 168002, "inference": true}[0m
Process SpawnProcess-77:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:56:22,755 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:56:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:56:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:56:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:56:27 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:56:28,192 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:56:28,203 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:56:28,203 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:56:28,211 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:56:31,453 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 179849, "inference": true}[0m
2025-10-15 18:56:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:56:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:56:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:56:32 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:56:32,769 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 179849, "inference": true}[0m
2025-10-15 18:56:41,391 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 179849, "inference": true, "elapsed_time": 9.94}[0m
2025-10-15 18:56:41,390 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 8.621423427000991, "pid": 179849, "inference": true}[0m
2025-10-15 18:56:41,391 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 179849, "inference": true}[0m
2025-10-15 18:56:41,393 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 18:56:41,394 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 18:56:41,395 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 179849, "inference": true}[0m
Process SpawnProcess-78:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
2025-10-15 18:58:04,430 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 60, in <module>
    class Assistant(Agent):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 227, in Assistant
    async def validate_phone_number(self, phone_input: PhoneNumberInput) -> str:
NameError: name 'PhoneNumberInput' is not defined
2025-10-15 18:58:23,385 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/usr/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/usr/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/usr/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 28, in <module>
    from helper_functions import *
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 60, in <module>
    class Assistant(Agent):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 227, in Assistant
    async def validate_phone_number(self, phone_input: PhoneNumberInput) -> str:
NameError: name 'PhoneNumberInput' is not defined
2025-10-15 18:59:37,158 - [33mWARNING[0m watchfiles.main - process already dead, exit code: 1 [90m[0m
2025-10-15 18:59:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:59:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:59:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:59:41 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:59:42,381 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 18:59:42,393 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 18:59:42,393 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 18:59:42,401 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 18:59:45,412 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 182451, "inference": true}[0m
2025-10-15 18:59:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 18:59:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 18:59:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 18:59:46 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 18:59:46,652 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 182451, "inference": true}[0m
2025-10-15 18:59:55,836 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 182451, "inference": true, "elapsed_time": 10.42}[0m
2025-10-15 18:59:55,835 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 9.183208128000842, "pid": 182451, "inference": true}[0m
2025-10-15 18:59:55,836 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 182451, "inference": true}[0m
2025-10-15 18:59:55,840 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 18:59:56,705 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_k2SZsu6tcprX", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 19:00:48,302 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_k2SZsu6tcprX"}[0m
2025-10-15 19:00:48,304 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 182451, "inference": true}[0m
2025-10-15 19:00:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:00:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:00:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:00:52 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:00:52,707 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:00:52,716 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:00:52,716 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:00:52,722 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:00:55,451 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 183569, "inference": true}[0m
2025-10-15 19:00:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:00:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:00:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:00:56 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:00:56,432 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 183569, "inference": true}[0m
2025-10-15 19:01:02,683 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 183569, "inference": true, "elapsed_time": 7.23}[0m
2025-10-15 19:01:02,683 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 6.250608444999671, "pid": 183569, "inference": true}[0m
2025-10-15 19:01:02,683 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 183569, "inference": true}[0m
2025-10-15 19:01:02,685 - [32mINFO[0m livekit.agents - [1msee tracing information at http://localhost:11000/debug[0m [90m[0m
2025-10-15 19:01:03,708 - [32mINFO[0m livekit.agents - registered worker [90m{"id": "AW_K4Y2HjLAwdLV", "url": "wss://itcurvedev-8eikcg0z.livekit.cloud", "region": "India West", "protocol": 16}[0m
2025-10-15 19:02:00,962 - [32mINFO[0m livekit.agents - received job request [90m{"job_id": "AJ_kU8A37Eaa8X2", "dispatch_id": "", "room_name": "both-21-1-BARWOOD & REGENCY TAXI-NUdTn", "agent_name": "", "resuming": false}[0m
2025-10-15 19:02:01,139 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 184415}[0m
2025-10-15 19:02:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:02:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:02:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:02:02 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:02:02,370 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 184415, "elapsed_time": 1.23}[0m
2025-10-15 19:02:02,370 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
VAAPI is supported.
2025-10-15 19:02:05 - ivr_bot.main - INFO - [no-session] - Call SID: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7
2025-10-15 19:02:05 - ivr_bot.main - INFO - [no-session] - Call SID: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7
2025-10-15 19:02:05,161 - [32mINFO[0m ivr_bot.main - Call SID: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05,161 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7 [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05,162 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05,162 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7 [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7
2025-10-15 19:02:05,162 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05,162 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7 [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7
2025-10-15 19:02:05,163 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Client ID None
2025-10-15 19:02:05 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:02:05 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Failed to initialize Agent with increased function call limits
2025-10-15 19:02:05 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 19:02:05,417 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:02:05,417 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Using pre-configured background audio player for typing sounds
2025-10-15 19:02:05 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 19:02:05,417 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 19:02:05,418 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:05,424 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:27 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:02:27 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:02:27 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:02:27,864 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:27,865 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:27 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:02:27,865 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Initialized background audio player
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 19:02:28,232 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Started typing sounds for API fetching phase
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 19:02:28,234 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:02:28,267 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - {}
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:02:28,267 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 19:02:28 - ivr_bot.main - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:02:28,268 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.cache_manager - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:02:28 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:02:28,268 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Using cached affiliate for IDs 1:21
2025-10-15 19:02:28 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:02:28,268 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,269 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Widget Flow chatbot Selected
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 19:02:28,269 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,269 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,269 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,269 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 19:02:28,269 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,270 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:28,270 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:29 - ivr_bot.side_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:02:29,399 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:29,400 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:29 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:02:29,400 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,947 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,947 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_05566e15b0fd12c90068efa976bfb48193be7bd323bb584666', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085 -80.56370227557687 40.03477876450898 -76.28661650301018'}), ResponseOutputMessage(id='msg_05566e15b0fd12c90068efa977f5188193b6d481195eb2db00', content=[ResponseOutputText(annotations=[], text='Montgomery, Roanoke, Botetourt, Rockbridge, Augusta, Rockingham, Shenandoah, Frederick, Clarke, Loudoun ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Client ID -1
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=78, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=511) [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 78 [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,948 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 78 output tokens (gpt-4o) [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,949 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 78 output tokens [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,949 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 19:02:32,949 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:02:32,949 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,949 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:32,949 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:33 - ivr_bot.side_functions - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:02:33,964 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:33 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:02:33,964 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:33,965 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Building user context information
2025-10-15 19:02:34 - ivr_bot.main - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - User context built successfully
2025-10-15 19:02:34 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 19:02:34,966 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Invalid phone number format: 
2025-10-15 19:02:34 - ivr_bot.main - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:02:34 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Invalid phone number format: 
2025-10-15 19:02:34,966 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:02:34,967 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - Invalid phone number format: 
2025-10-15 19:02:34 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:02:34,967 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:02:34,967 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:02:34,967 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:02:34,968 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:07:04,201 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_phone_number", "arguments": "{\"phone_input\":{\"number\":\"9876543210\"}}", "speech_id": "speech_c036277c583f", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:07:04 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - validate_phone_number function called with: 9876543210
2025-10-15 19:07:04 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ✅ Phone number validation successful: 9876543210
2025-10-15 19:07:04 - ivr_bot.helper_functions - INFO - [no-session] - validate_phone_number function called with: 9876543210
2025-10-15 19:07:04,201 - [32mINFO[0m ivr_bot.helper_functions - validate_phone_number function called with: 9876543210 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:07:04 - ivr_bot.helper_functions - INFO - [no-session] - ✅ Phone number validation successful: 9876543210
2025-10-15 19:07:04,202 - [32mINFO[0m ivr_bot.helper_functions - ✅ Phone number validation successful: 9876543210 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:07:04,213 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_c036277c583f", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:20 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - get_current_date_and_time function called...
2025-10-15 19:08:20,249 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_current_date_and_time", "arguments": "{}", "speech_id": "speech_934df5da8a7e", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:20 - ivr_bot.helper_functions - INFO - [no-session] - get_current_date_and_time function called...
2025-10-15 19:08:20,250 - [32mINFO[0m ivr_bot.helper_functions - get_current_date_and_time function called... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:20,268 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_id", "arguments": "{}", "speech_id": "speech_934df5da8a7e", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:20,288 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_934df5da8a7e", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:44,185 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:44,186 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-62292' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:44,350 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:46 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - get_current_date_and_time function called...
2025-10-15 19:08:46,736 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_client_id", "arguments": "{}", "speech_id": "speech_e0ba5b65b316", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:46,736 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "get_current_date_and_time", "arguments": "{}", "speech_id": "speech_e0ba5b65b316", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:46 - ivr_bot.helper_functions - INFO - [no-session] - get_current_date_and_time function called...
2025-10-15 19:08:46,736 - [32mINFO[0m ivr_bot.helper_functions - get_current_date_and_time function called... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:08:46,737 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_e0ba5b65b316", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:10,446 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload_v2", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 19:08\",\"pickup_lat\":\"0\",\"pickup_lng\":\"0\",\"dropoff_lat\":\"0\",\"dropoff_lng\":\"0\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_ec85a6b085da", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:10 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:10:10 - ivr_bot.helper_functions - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:10:10 - ivr_bot.helper_functions - INFO - [no-session] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:10:10,447 - [32mINFO[0m ivr_bot.helper_functions - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:10 - ivr_bot.helper_functions - ERROR - [no-session] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:10:10,447 - [31mERROR[0m ivr_bot.helper_functions - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:10,481 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_ec85a6b085da", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:38,240 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:38,241 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-81591' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:43 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:10:43 - ivr_bot.helper_functions - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:10:43,073 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload_v2", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 19:08\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"9876543210\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_2f57329f668a", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:43 - ivr_bot.helper_functions - INFO - [no-session] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:10:43,074 - [32mINFO[0m ivr_bot.helper_functions - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:43 - ivr_bot.helper_functions - ERROR - [no-session] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:10:43,074 - [31mERROR[0m ivr_bot.helper_functions - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:10:43,077 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_2f57329f668a", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:06,536 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:07 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - validate_phone_number function called with: 9876543212
2025-10-15 19:11:07 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ✅ Phone number validation successful: 9876543212
2025-10-15 19:11:07,915 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "validate_phone_number", "arguments": "{\"phone_input\":{\"number\":\"9876543212\"}}", "speech_id": "speech_34888874525b", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:07 - ivr_bot.helper_functions - INFO - [no-session] - validate_phone_number function called with: 9876543212
2025-10-15 19:11:07,915 - [32mINFO[0m ivr_bot.helper_functions - validate_phone_number function called with: 9876543212 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:07 - ivr_bot.helper_functions - INFO - [no-session] - ✅ Phone number validation successful: 9876543212
2025-10-15 19:11:07,915 - [32mINFO[0m ivr_bot.helper_functions - ✅ Phone number validation successful: 9876543212 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:07,928 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_34888874525b", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:15 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:11:15 - ivr_bot.helper_functions - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:11:15,877 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload_v2", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 19:08\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"9876543212\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_26aa026356f4", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:15 - ivr_bot.helper_functions - INFO - [no-session] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:11:15,878 - [32mINFO[0m ivr_bot.helper_functions - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:15 - ivr_bot.helper_functions - ERROR - [no-session] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:11:15,878 - [31mERROR[0m ivr_bot.helper_functions - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:15,899 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_26aa026356f4", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:51,816 - [31mERROR[0m livekit.agents - Error in _play_task
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:51,816 - [31mERROR[0m asyncio - Task exception was never retrieved
future: <Task finished name='Task-94701' coro=<BackgroundAudioPlayer._play_task() done, defined at /home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py:13> exception=RuntimeError('aclose(): asynchronous generator is already running')>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/background_audio.py", line 360, in _play_task
    await gen.aclose()
RuntimeError: aclose(): asynchronous generator is already running [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:58 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:11:58 - ivr_bot.helper_functions - ERROR - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:11:58,091 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "collect_main_trip_payload_v2", "arguments": "{\"payload\":{\"pickup_street_address\":\"1 School Dr\",\"dropoff_street_address\":\"15800 Quince Orchard Rd\",\"pickup_city\":\"Gaithersburg\",\"dropoff_city\":\"Gaithersburg\",\"pickup_state\":\"MD\",\"dropoff_state\":\"MD\",\"extra_details\":\"\",\"client_id\":\"\",\"funding_source_id\":\"\",\"rider_name\":\"waseem\",\"payment_type_id\":\"\",\"copay_funding_source_id\":\"\",\"copay_payment_type_id\":\"\",\"booking_time\":\"2025-10-15 19:08\",\"pickup_lat\":\"\",\"pickup_lng\":\"\",\"dropoff_lat\":\"\",\"dropoff_lng\":\"\",\"rider_id\":\"\",\"number_of_wheel_chairs\":\"0\",\"number_of_passengers\":\"1\",\"is_schedule\":\"0\",\"pickup_city_zip_code\":\"20878\",\"dropoff_city_zip_code\":\"20878\",\"rider_home_address\":\"\",\"rider_home_city\":\"\",\"rider_home_state\":\"\",\"home_phone\":\"\",\"office_phone\":\"\",\"total_passengers\":1,\"total_wheelchairs\":0,\"is_will_call\":false,\"will_call_day\":\"\",\"pickup_remarks\":\"\",\"pickup_phone_number\":\"9876543212\",\"dropoff_remarks\":\"\",\"dropoff_phone_number\":\"\"}}", "speech_id": "speech_34a35847f9b0", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:58 - ivr_bot.helper_functions - INFO - [no-session] - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation...
2025-10-15 19:11:58,091 - [32mINFO[0m ivr_bot.helper_functions - collect_main_trip_payload_v2 function called with comprehensive Pydantic validation... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:58 - ivr_bot.helper_functions - ERROR - [no-session] - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number'
2025-10-15 19:11:58,091 - [31mERROR[0m ivr_bot.helper_functions - ❌ Error validating phone number: 'MainTripPayload' object has no attribute 'phone_number' [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:11:58,098 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_34a35847f9b0", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - transfer_call_voice function called...
2025-10-15 19:12:04,737 - [36mDEBUG[0m livekit.agents - executing tool [90m{"function": "transfer_call", "arguments": "{}", "speech_id": "speech_fa82d61c61fb", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - transfer sip: sip:5000@139.64.158.216
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [no-session] - transfer_call_voice function called...
2025-10-15 19:12:04,737 - [32mINFO[0m ivr_bot.helper_functions - transfer_call_voice function called... [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - participant_identity: BARWOOD & REGENCY TAXI
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [no-session] - transfer sip: sip:5000@139.64.158.216
2025-10-15 19:12:04,738 - [32mINFO[0m ivr_bot.helper_functions - transfer sip: sip:5000@139.64.158.216 [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:04 - ivr_bot.helper_functions - INFO - [no-session] - participant_identity: BARWOOD & REGENCY TAXI
2025-10-15 19:12:04,738 - [32mINFO[0m ivr_bot.helper_functions - participant_identity: BARWOOD & REGENCY TAXI [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:04,739 - [36mDEBUG[0m ivr_bot.helper_functions - Transfer request: participant_identity: "BARWOOD & REGENCY TAXI"
room_name: "both-21-1-BARWOOD & REGENCY TAXI-NUdTn"
transfer_to: "sip:5000@139.64.158.216"
 [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:05 - ivr_bot.helper_functions - INFO - [chat-b0971baa-cf1e-4ef3-9f6b-ed0acbf538c7] - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 19:12:05 - ivr_bot.helper_functions - INFO - [no-session] - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400)
2025-10-15 19:12:05,451 - [32mINFO[0m ivr_bot.helper_functions - TwirpError(code=invalid_argument, message=twirp error unknown: no SIP session associated with participant, status=400) [90m{"session_id": "no-session", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:12:05,451 - [36mDEBUG[0m livekit.agents - tools execution completed [90m{"speech_id": "speech_fa82d61c61fb", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:13:18,291 - [31mERROR[0m asyncio - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/aiohttp/client_ws.py", line 336, in receive
    msg = await self._reader.read()
  File "aiohttp/_websocket/reader_c.py", line 113, in read
  File "aiohttp/_websocket/reader_c.py", line 110, in aiohttp._websocket.reader_c.WebSocketDataQueue.read
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

asyncio.exceptions.CancelledError [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:42,685 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "AW_K4Y2HjLAwdLV"}[0m
2025-10-15 19:14:42,687 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:42,686 - [36mDEBUG[0m livekit.agents - shutting down job task [90m{"reason": "", "user_initiated": false, "pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:42,868 - [36mDEBUG[0m livekit.agents - http_session(): closing the httpclient ctx [90m{"pid": 184415, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:42,892 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 183569, "inference": true}[0m
2025-10-15 19:14:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:14:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:14:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:14:47 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:14:48,016 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:14:48,024 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:14:48,024 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:14:48,032 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:14:48,033 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:14:50,598 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 194878, "inference": true}[0m
2025-10-15 19:14:50,602 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 194880}[0m
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:14:51 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:14:51,873 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 194880, "elapsed_time": 1.27}[0m
2025-10-15 19:14:51,873 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
VAAPI is supported.
2025-10-15 19:14:51,921 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 194878, "inference": true}[0m
2025-10-15 19:14:53 - ivr_bot.main - INFO - [no-session] - Call SID: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b
2025-10-15 19:14:53 - ivr_bot.main - INFO - [no-session] - Call SID: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b
2025-10-15 19:14:53,699 - [32mINFO[0m ivr_bot.main - Call SID: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53,700 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b
2025-10-15 19:14:53,701 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53,701 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53,701 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53,702 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b
2025-10-15 19:14:53,702 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.helper_functions - INFO - [chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b] - Client ID None
2025-10-15 19:14:53 - ivr_bot.helper_functions - WARNING - [chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:14:53 - ivr_bot.helper_functions - WARNING - [chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b] - Failed to initialize Agent with increased function call limits
2025-10-15 19:14:53 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 19:14:53,952 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:14:53,952 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.main - INFO - [chat-b7b2b281-a7bb-4861-8dcf-d3f68ca52a2b] - Using pre-configured background audio player for typing sounds
2025-10-15 19:14:53 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 19:14:53,952 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 19:14:53,953 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:14:53,958 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 194880, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:01,965 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 10.043287553999107, "pid": 194878, "inference": true}[0m
2025-10-15 19:15:01,965 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 194878, "inference": true}[0m
2025-10-15 19:15:03,273 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process inference_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/inference_proc_lazy_main.py", line 61, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 19:15:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:07 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:08,003 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:15:08,013 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:15:08,013 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:15:08,021 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:15:08,022 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:15:11,091 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195195, "inference": true}[0m
2025-10-15 19:15:11,095 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195197}[0m
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:13 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:13,508 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 195197}[0m
2025-10-15 19:15:13,542 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 195195, "inference": true}[0m
2025-10-15 19:15:16,525 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process job_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/job_proc_lazy_main.py", line 83, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 19:15:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:21 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:21,931 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:15:21,943 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:15:21,943 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:15:21,954 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:15:21,956 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:28 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:29,885 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 19:15:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:34 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:34,862 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:15:34,873 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:15:34,873 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:15:34,881 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:15:34,883 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:15:37,934 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195571, "inference": true}[0m
2025-10-15 19:15:37,937 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195573}[0m
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:39 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:40,165 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 195571, "inference": true}[0m
2025-10-15 19:15:40,179 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 195573}[0m
2025-10-15 19:15:43,187 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
Process job_proc:
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 57, in aclose
    await self._writer.wait_closed()
  File "/usr/lib/python3.10/asyncio/streams.py", line 343, in wait_closed
    await self._protocol._get_close_waiter(self)
  File "/usr/lib/python3.10/asyncio/selector_events.py", line 862, in _read_ready__data_received
    data = self._sock.recv(self.max_size)
ConnectionResetError: [Errno 104] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/job_proc_lazy_main.py", line 83, in proc_main
    client.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/ipc/proc_client.py", line 162, in _monitor_task
    await self._acch.aclose()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/utils/aio/duplex_unix.py", line 60, in aclose
    raise DuplexClosed() from e
livekit.agents.utils.aio.duplex_unix.DuplexClosed
2025-10-15 19:15:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:49,297 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:15:49,312 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:15:49,312 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:15:49,323 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:15:49,326 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:15:53,349 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195901, "inference": true}[0m
2025-10-15 19:15:53,353 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 195903}[0m
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:15:54 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:15:54,981 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 195901, "inference": true}[0m
2025-10-15 19:15:54,987 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 195903, "elapsed_time": 1.63}[0m
2025-10-15 19:15:54,987 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
VAAPI is supported.
2025-10-15 19:15:56 - ivr_bot.main - INFO - [no-session] - Call SID: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1
2025-10-15 19:15:56 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1
2025-10-15 19:15:56 - ivr_bot.main - INFO - [no-session] - Call SID: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1
2025-10-15 19:15:56,733 - [32mINFO[0m ivr_bot.main - Call SID: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1 [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56,733 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1 [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56,734 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56,734 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1 [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56,734 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56,734 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1 [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:56 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1
2025-10-15 19:15:56,734 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1 [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:57 - ivr_bot.helper_functions - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Client ID None
2025-10-15 19:15:57 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:15:57 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Failed to initialize Agent with increased function call limits
2025-10-15 19:15:57 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 19:15:57,395 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:57 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:15:57 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Using pre-configured background audio player for typing sounds
2025-10-15 19:15:57,395 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:57 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 19:15:57,395 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:57 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 19:15:57,396 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:15:57,407 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:07,629 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 12.648230828999658, "pid": 195901, "inference": true}[0m
2025-10-15 19:16:07,630 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 195901, "inference": true, "elapsed_time": 14.28}[0m
2025-10-15 19:16:07,629 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 195901, "inference": true}[0m
2025-10-15 19:16:07,632 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 19:16:07,634 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 19:16:07,635 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 195901, "inference": true}[0m
2025-10-15 19:16:08 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:16:08 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:16:08,760 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:08 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:16:08,761 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:08 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:16:08,761 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Initialized background audio player
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 19:16:09,138 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Started typing sounds for API fetching phase
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 19:16:09,140 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - {}
2025-10-15 19:16:09,170 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - ERROR - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:16:09 - ivr_bot.cache_manager - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Using cached affiliate for IDs 1:21
2025-10-15 19:16:09 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Widget Flow chatbot Selected
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:16:09,170 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 19:16:09,171 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:16:09,171 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:16:09,171 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,171 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 19:16:09,171 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,172 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,172 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,172 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 19:16:09,172 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,172 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:09,173 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:10 - ivr_bot.side_functions - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:16:10,258 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:10,259 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:10 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:16:10,259 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,992 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,992 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,993 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,994 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,994 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,995 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_0c5cc1369a0c94fd0068efacab94b081959d9bf4e2bfc4a7a9', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085, -80.56370227557687 and 40.03477876450898, -76.28661650301018'}), ResponseOutputMessage(id='msg_0c5cc1369a0c94fd0068efacaeb0ec8195995f2d002d0813a9', content=[ResponseOutputText(annotations=[], text='Roanoke, Washington, Kent, Mercer, Columbiana, Contra Costa, Merced, Comanche, Comal, Colusa ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,995 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=79, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=512) [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,995 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 79 [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,995 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 79 output tokens (gpt-4o) [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,996 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 79 output tokens [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15 - ivr_bot.helper_functions - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Client ID -1
2025-10-15 19:16:15,996 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:16:15 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 19:16:15,996 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:16:15,996 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,997 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:15,997 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:17 - ivr_bot.side_functions - ERROR - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:16:17,090 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:17 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:16:17,090 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:17,091 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Building user context information
2025-10-15 19:16:18 - ivr_bot.main - INFO - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - User context built successfully
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Invalid phone number format: 
2025-10-15 19:16:18 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 19:16:18 - ivr_bot.main - ERROR - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:16:18,092 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Invalid phone number format: 
2025-10-15 19:16:18 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 19:16:18,093 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [chat-af63ee76-6835-4d5b-ae31-b1acd08c8fb1] - Invalid phone number format: 
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:16:18,093 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:16:18,094 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:16:18,094 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:16:18,094 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:18,094 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 195903, "job_id": "AJ_kU8A37Eaa8X2"}[0m
Process SpawnProcess-87:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 317, in _bootstrap
    util._exit_function()
  File "/usr/lib/python3.10/multiprocessing/util.py", line 357, in _exit_function
    p.join()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 149, in join
    res = self._popen.wait(timeout)
  File "/usr/lib/python3.10/multiprocessing/popen_fork.py", line 43, in wait
    return self.poll(os.WNOHANG if timeout == 0.0 else 0)
  File "/usr/lib/python3.10/multiprocessing/popen_forkserver.py", line 65, in poll
    if not wait([self.sentinel], timeout):
  File "/usr/lib/python3.10/multiprocessing/connection.py", line 931, in wait
    ready = selector.select(timeout)
  File "/usr/lib/python3.10/selectors.py", line 416, in select
    fd_event_list = self._selector.poll(timeout)
KeyboardInterrupt
2025-10-15 19:16:41,319 - [33mWARNING[0m watchfiles.main - process has not terminated, sending SIGKILL [90m[0m
2025-10-15 19:16:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:16:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:16:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:16:44 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:16:44,952 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m[0m
2025-10-15 19:16:44,961 - [32mINFO[0m livekit.agents - starting worker [90m{"version": "1.0.23", "rtc-version": "1.0.16"}[0m
2025-10-15 19:16:44,961 - [32mINFO[0m livekit.agents - preloading plugins [90m{"packages": ["livekit.plugins.openai", "livekit.plugins.deepgram", "livekit.plugins.silero", "livekit.plugins.turn_detector"]}[0m
2025-10-15 19:16:44,968 - [32mINFO[0m livekit.agents - starting inference executor [90m[0m
2025-10-15 19:16:44,969 - [35mDEV [0m livekit.agents - reloading job [90m{"job_id": "AJ_kU8A37Eaa8X2", "agent_name": ""}[0m
2025-10-15 19:16:47,481 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 196977, "inference": true}[0m
2025-10-15 19:16:47,484 - [32mINFO[0m livekit.agents - initializing process [90m{"pid": 196979}[0m
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache with 1 entries
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache with 0 entries
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded client cache keys: []
2025-10-15 19:16:48 - ivr_bot.cache_manager - INFO - [no-session] - Loaded affiliate cache keys: ['ids:1:21']
2025-10-15 19:16:48,536 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 196979, "elapsed_time": 1.05}[0m
2025-10-15 19:16:48,536 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:48,543 - [36mDEBUG[0m livekit.agents - initializing inference runner [90m{"runner": "lk_end_of_utterance_en", "pid": 196977, "inference": true}[0m
VAAPI is supported.
2025-10-15 19:16:51 - ivr_bot.main - INFO - [no-session] - Call SID: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35
2025-10-15 19:16:51 - ivr_bot.main - INFO - [no-session] - Call SID: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35
2025-10-15 19:16:51,272 - [32mINFO[0m ivr_bot.main - Call SID: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35 [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51,273 - [36mDEBUG[0m ivr_bot.cost_tracker - Set call context to: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35 [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35
2025-10-15 19:16:51,273 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51,273 - [36mDEBUG[0m ivr_bot.cost_tracker - Created new cost tracker for call: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35 [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51,273 - [36mDEBUG[0m ivr_bot.cost_tracker - Cost tracker reset [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51,273 - [36mDEBUG[0m ivr_bot.cost_tracker - Reset cost tracker for call: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35 [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.main - INFO - [no-session] - Cost tracker initialized for call: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35
2025-10-15 19:16:51,273 - [32mINFO[0m ivr_bot.main - Cost tracker initialized for call: chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35 [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.helper_functions - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Client ID None
2025-10-15 19:16:51 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:16:51 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Failed to initialize Agent with increased function call limits
2025-10-15 19:16:51 - ivr_bot.helper_functions - INFO - [no-session] - Client ID None
2025-10-15 19:16:51,644 - [32mINFO[0m ivr_bot.helper_functions - Client ID None [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: None) - self.client_id will be None
2025-10-15 19:16:51,644 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: None) - self.client_id will be None [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Using pre-configured background audio player for typing sounds
2025-10-15 19:16:51 - ivr_bot.helper_functions - WARNING - [no-session] - Failed to initialize Agent with increased function call limits
2025-10-15 19:16:51,644 - [33mWARNING[0m ivr_bot.helper_functions - Failed to initialize Agent with increased function call limits [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51 - ivr_bot.main - INFO - [no-session] - Using pre-configured background audio player for typing sounds
2025-10-15 19:16:51,645 - [32mINFO[0m ivr_bot.main - Using pre-configured background audio player for typing sounds [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:51,651 - [36mDEBUG[0m livekit.agents - http_session(): creating a new httpclient ctx [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:55,759 - [36mDEBUG[0m livekit.agents - inference runner initialized [90m{"runner": "lk_end_of_utterance_en", "elapsed_time": 7.21531766300177, "pid": 196977, "inference": true}[0m
2025-10-15 19:16:55,760 - [32mINFO[0m livekit.agents - process initialized [90m{"pid": 196977, "inference": true, "elapsed_time": 8.28}[0m
2025-10-15 19:16:55,759 - [36mDEBUG[0m asyncio - Using selector: EpollSelector [90m{"pid": 196977, "inference": true}[0m
2025-10-15 19:16:55,761 - [31mERROR[0m livekit.agents - worker failed [90m[0m
Traceback (most recent call last):
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 88, in _worker_run
    await worker.run()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 418, in run
    await self._http_server.start()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 1519, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 98] error while attempting to bind on address ('::', 11000, 0, 0): address already in use
2025-10-15 19:16:55,762 - [32mINFO[0m livekit.agents - shutting down worker [90m{"id": "unregistered"}[0m
2025-10-15 19:16:55,763 - [32mINFO[0m livekit.agents - process exiting [90m{"reason": "", "pid": 196977, "inference": true}[0m
2025-10-15 19:16:57 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:16:57 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:16:57 - ivr_bot.main - INFO - [no-session] - Interruptions ENABLED after first greeting - user can interrupt the bot now
2025-10-15 19:16:57,720 - [32mINFO[0m ivr_bot.main - Interruptions ENABLED after first greeting - user can interrupt the bot now [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:57,720 - [36mDEBUG[0m livekit.agents - input stream detached [90m{"participant": "BARWOOD & REGENCY TAXI", "source": "SOURCE_UNKNOWN", "accepted_sources": ["SOURCE_MICROPHONE"], "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:57 - ivr_bot.main - INFO - [no-session] - Audio input DISABLED - agent will not process any speech during API calls
2025-10-15 19:16:57,720 - [32mINFO[0m ivr_bot.main - Audio input DISABLED - agent will not process any speech during API calls [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Initialized background audio player
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - Initialized background audio player
2025-10-15 19:16:58,040 - [32mINFO[0m ivr_bot.main - Initialized background audio player [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Started typing sounds for API fetching phase
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - Started typing sounds for API fetching phase
2025-10-15 19:16:58,042 - [32mINFO[0m ivr_bot.main - Started typing sounds for API fetching phase [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - {}
2025-10-15 19:16:58,060 - [36mDEBUG[0m ivr_bot.main - Metadata: {'phoneNo': '', 'clientID': '', 'userID': '', 'affiliateId': '21', 'familyId': '1', 'affiliateName': 'BARWOOD & REGENCY TAXI'} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn
2025-10-15 19:16:58 - ivr_bot.main - ERROR - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:16:58,060 - [32mINFO[0m ivr_bot.main - Room Name: both-21-1-BARWOOD & REGENCY TAXI-NUdTn [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - {}
2025-10-15 19:16:58 - ivr_bot.cache_manager - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:16:58,060 - [32mINFO[0m ivr_bot.main - {} [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - ERROR - [no-session] - Error in recognizing affiliate from number: 'sip.phoneNumber'
2025-10-15 19:16:58,061 - [31mERROR[0m ivr_bot.main - Error in recognizing affiliate from number: 'sip.phoneNumber' [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Using cached affiliate for IDs 1:21
2025-10-15 19:16:58 - ivr_bot.cache_manager - INFO - [no-session] - Cache HIT for affiliate: ids:1:21
2025-10-15 19:16:58,061 - [32mINFO[0m ivr_bot.cache_manager - Cache HIT for affiliate: ids:1:21 [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58,061 - [36mDEBUG[0m ivr_bot.main - cached_affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - Using cached affiliate for IDs 1:21
2025-10-15 19:16:58,061 - [32mINFO[0m ivr_bot.main - Using cached affiliate for IDs 1:21 [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Widget Flow chatbot Selected
2025-10-15 19:16:58,061 - [36mDEBUG[0m ivr_bot.main - AFFILIATE: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58,061 - [36mDEBUG[0m ivr_bot.main - Rider: {'number_of_riders': 1, 'rider_1': {'name': 'Unknown', 'client_id': '-1', 'city': 'Unknown', 'state': 'Unknown', 'current_location': 'Unknown', 'rider_id': '-1'}} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58,061 - [36mDEBUG[0m ivr_bot.main - Affiliate: {'AffiliateID': 21, 'AffiliateName': 'Barwood and Regency Taxi ', 'AffiliateFamilyID': 1, 'TwillioPhoneNumber': '3019005009', 'TypeForIVRAI': 'BOTH'} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58 - ivr_bot.main - INFO - [no-session] - Widget Flow chatbot Selected
2025-10-15 19:16:58,061 - [32mINFO[0m ivr_bot.main - Widget Flow chatbot Selected [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58,062 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:58,062 - [36mDEBUG[0m ivr_bot.side_functions - Payload Sent for Affiliate Information: {'iaffiliateid': 21} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:59 - ivr_bot.side_functions - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:16:59,119 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: fetch_affiliate_details [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:59,119 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: search_web_manual [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:16:59 - ivr_bot.side_functions - INFO - [no-session] - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
        
2025-10-15 19:16:59,119 - [32mINFO[0m ivr_bot.side_functions - Called search_web_manual function with prompt: What are the counties that lies within these coordinates {'x1': '37.175108867393085', 'y1': '-80.56370227557687', 'x2': '40.03477876450898', 'y2': '-76.28661650301018'}. Only return names of the counties separated by commas. 
        Do not add name of the states. Do not add any other line or comment. I just need the name of the counties
        Sample response would be 'county_1, county_2, ......, county_n'
        DO NOT RETURN MORE THAN 10 COUNTY NAMES
         [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,552 - [36mDEBUG[0m ivr_bot.side_functions - Response object type: <class 'openai.types.responses.response.Response'> [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,553 - [36mDEBUG[0m ivr_bot.side_functions - Response attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', '_request_id', 'construct', 'copy', 'created_at', 'dict', 'error', 'from_orm', 'id', 'incomplete_details', 'instructions', 'json', 'max_output_tokens', 'metadata', 'model', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'object', 'output', 'output_text', 'parallel_tool_calls', 'parse_file', 'parse_obj', 'parse_raw', 'previous_response_id', 'reasoning', 'schema', 'schema_json', 'status', 'temperature', 'text', 'to_dict', 'to_json', 'tool_choice', 'tools', 'top_p', 'truncation', 'update_forward_refs', 'usage', 'user', 'validate'] [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,553 - [36mDEBUG[0m ivr_bot.side_functions - Response.text type: <class 'openai.types.responses.response_text_config.ResponseTextConfig'> [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,553 - [36mDEBUG[0m ivr_bot.side_functions - Response.text attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__class_vars__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__fields__', '__fields_set__', '__format__', '__ge__', '__get_pydantic_core_schema__', '__get_pydantic_json_schema__', '__getattr__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__pretty__', '__private_attributes__', '__pydantic_complete__', '__pydantic_computed_fields__', '__pydantic_core_schema__', '__pydantic_custom_init__', '__pydantic_decorators__', '__pydantic_extra__', '__pydantic_fields__', '__pydantic_fields_set__', '__pydantic_generic_metadata__', '__pydantic_init_subclass__', '__pydantic_parent_namespace__', '__pydantic_post_init__', '__pydantic_private__', '__pydantic_root_model__', '__pydantic_serializer__', '__pydantic_validator__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__repr_args__', '__repr_name__', '__repr_recursion__', '__repr_str__', '__rich_repr__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_calculate_keys', '_check_frozen', '_copy_and_set_values', '_get_value', '_iter', 'construct', 'copy', 'dict', 'format', 'from_orm', 'json', 'model_computed_fields', 'model_config', 'model_construct', 'model_copy', 'model_dump', 'model_dump_json', 'model_extra', 'model_fields', 'model_fields_set', 'model_json_schema', 'model_parametrized_name', 'model_post_init', 'model_rebuild', 'model_validate', 'model_validate_json', 'model_validate_strings', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'to_dict', 'to_json', 'update_forward_refs', 'validate'] [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,553 - [36mDEBUG[0m ivr_bot.side_functions - Response.output type: <class 'list'> [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02 - ivr_bot.helper_functions - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Client ID -1
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.side_functions - Response.output: [ResponseFunctionWebSearch(id='ws_0d6cb8e882c8a5090068efacdc3d808194a054f818282264e9', status='completed', type='web_search_call', action={'type': 'search', 'query': 'counties within coordinates 37.175108867393085,-80.56370227557687 to 40.03477876450898,-76.28661650301018'}), ResponseOutputMessage(id='msg_0d6cb8e882c8a5090068efacdd93d08194a836d4ac0f21617c', content=[ResponseOutputText(annotations=[], text='Roanoke, Montgomery, Botetourt, Bedford, Franklin, Craig, Floyd, Pulaski, Giles, Alleghany ', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')] [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.side_functions - Usage object: ResponseUsage(input_tokens=433, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=76, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=509) [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.side_functions - Extracted token values - input: 433, output: 76 [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.cost_tracker - Added websearch usage: 433 input, 76 output tokens (gpt-4o) [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.side_functions - Web search usage: 433 input, 76 output tokens [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: search_web_manual [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02 - ivr_bot.helper_functions - INFO - [no-session] - Client ID -1
2025-10-15 19:17:02,554 - [32mINFO[0m ivr_bot.helper_functions - Client ID -1 [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02 - ivr_bot.helper_functions - WARNING - [no-session] - ❌ Client ID not available (received: -1) - self.client_id will be None
2025-10-15 19:17:02,554 - [33mWARNING[0m ivr_bot.helper_functions - ❌ Client ID not available (received: -1) - self.client_id will be None [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,554 - [36mDEBUG[0m ivr_bot.main - Started typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:02,555 - [36mDEBUG[0m ivr_bot.side_functions - Payload sent to get frequent addresses: {'clientID': '-1', 'affiliateID': '21', 'bIncludeClientAddress': '', 'bGetAddressDataOnly': '', 'bGetCompletedHistoricRides': '', 'responseJSON': '', 'responseCode': 100} [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:03 - ivr_bot.side_functions - ERROR - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:17:03,453 - [36mDEBUG[0m ivr_bot.side_functions - Response from FrequentDataAPI: Please provide valid Client ID. [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:03 - ivr_bot.side_functions - ERROR - [no-session] - Failed to parse response as JSON. Raw Response: Please provide valid Client ID.
2025-10-15 19:17:03,453 - [31mERROR[0m ivr_bot.side_functions - Failed to parse response as JSON. Raw Response: Please provide valid Client ID. [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:03,454 - [36mDEBUG[0m ivr_bot.main - Stopped typing sounds for conversation API call: get_frequnt_addresses_manual [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Building user context information
2025-10-15 19:17:04 - ivr_bot.main - INFO - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - User context built successfully
2025-10-15 19:17:04 - ivr_bot.main - INFO - [no-session] - Building user context information
2025-10-15 19:17:04,455 - [32mINFO[0m ivr_bot.main - Building user context information [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Invalid phone number format: 
2025-10-15 19:17:04 - ivr_bot.main - INFO - [no-session] - User context built successfully
2025-10-15 19:17:04,455 - [32mINFO[0m ivr_bot.main - User context built successfully [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.main - ERROR - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:17:04,456 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Invalid phone number format: 
2025-10-15 19:17:04 - ivr_bot.main - ERROR - [no-session] - Error updating agent instructions: 'Assistant' object has no attribute '_activity'
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [chat-0998c2f9-06ce-4c9a-b54e-4dea00982f35] - Invalid phone number format: 
2025-10-15 19:17:04,456 - [31mERROR[0m ivr_bot.main - Error updating agent instructions: 'Assistant' object has no attribute '_activity' [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:17:04,456 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04 - ivr_bot.helper_functions - WARNING - [no-session] - Invalid phone number format: 
2025-10-15 19:17:04,456 - [33mWARNING[0m ivr_bot.helper_functions - Invalid phone number format:  [90m{"session_id": "no-session", "pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
2025-10-15 19:17:04,457 - [31mERROR[0m livekit.agents - unhandled exception while running the job task
Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 748, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=final_prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 760, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/main.py", line 765, in entrypoint
    agent = Assistant(call_sid=call_sid, context=ctx, room=ctx.room, instructions=prompt, affiliate_id=affiliate_id, rider_phone=phone_number, client_id=client_id)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 73, in __init__
    self.update_rider_phone(rider_phone)
  File "/home/senarios/VoiceAgent5withFeNew/VoiceAgent3/IT_Curves_Bot/helper_functions.py", line 104, in update_rider_phone
    self.session.say("The phone number is not correct. Let me transfer you to live agent.", allow_interruptions=False)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 518, in session
    return self._get_activity_or_raise().session
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/voice/agent.py", line 293, in _get_activity_or_raise
    if self._activity is None:
AttributeError: 'Assistant' object has no attribute '_activity' [90m{"pid": 196979, "job_id": "AJ_kU8A37Eaa8X2"}[0m
worker process is not responding.. worker crashed?
Process SpawnProcess-88:
Traceback (most recent call last):
  File "/usr/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/cli/_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/senarios/.local/lib/python3.10/site-packages/livekit/agents/worker.py", line 604, in aclose
    await self._http_session.close()
AttributeError: 'NoneType' object has no attribute 'close'
